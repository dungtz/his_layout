<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HIS - ƒëo b·ªánh b√°c sƒ©</title>
    <style>
        :root {
            --bg: #f6f7f9;
            --card: #fff;
            --line: #e5e7eb;
            --txt: #111827;
            --muted: #6b7280;
            --primary: #2563eb;
            --secondary: #4b5563;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --sidebar-width: 250px;
            --right-sidebar-width: 250px;
            --font-family: 'Times New Roman';
        }

        * {
            box-sizing: border-box;
            font-family: var(--font-family);
        }

        html,
        body {
            height: 100%;
            margin: 0;
            font: 14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
            color: var(--txt);
            background: var(--bg);
            font-family: var(--font-family);
        }

        /* Layout t·ªïng th·ªÉ */
        .container {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* Sidebar tr√°i - Danh s√°ch b·ªánh nh√¢n */
        .sidebar-left {
            width: var(--sidebar-width);
            background: var(--card);
            border-right: 1px solid var(--line);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Main content - Ph·∫ßn ƒëo b·ªánh */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 0;
            background: var(--bg);
        }

        /* Sidebar ph·∫£i - Ch·ªâ ƒë·ªãnh, ƒë∆°n thu·ªëc */
        .sidebar-right {
            width: var(--right-sidebar-width);
            background: var(--card);
            border-left: 1px solid var(--line);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header chung */
        .header {
            padding: 12px 16px;
            background: var(--card);
            border-bottom: 1px solid var(--line);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h2 {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
        }

        .header-actions {
            display: flex;
            gap: 8px;
        }

        /* Button styles */
        .btn {
            padding: 8px 12px;
            border: 1px solid var(--line);
            border-radius: 8px;
            background: #fff;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
            font-family: var(--font-family);
        }

        .btn:hover {
            background: #f9fafb;
        }

        .btn.primary {
            background: var(--primary);
            color: #fff;
            border-color: var(--primary);
        }

        .btn.primary:hover {
            background: #1d4ed8;
        }

        .btn.danger {
            background: var(--danger);
            color: #fff;
            border-color: var(--danger);
        }

        .btn.danger:hover {
            background: #dc2626;
        }

        .btn.success {
            background: var(--success);
            color: #fff;
            border-color: var(--success);
        }

        .btn.success:hover {
            background: #059669;
        }

        /* Input styles */
        input[type="text"],
        input[type="date"],
        input[type="time"],
        select,
        textarea {
            width: 100%;
            padding: 5px 6px;
            border: 1px solid var(--line);
            border-radius: 8px;
            background: #fff;
            outline: none;
            font-size: 14px;
            font-family: var(--font-family);
            flex: 1;
            border: none;
            border-bottom: 1px dashed #000;
            outline: none;
            padding: 5px 6px;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
            font-family: var(--font-family);
        }

        /* Patient list */
        .patient-list {
            flex: 1;
            overflow-y: auto;
            padding: 8px;
        }

        .patient-item {
            padding: 12px;
            background: var(--card);
            border: 1px solid var(--line);
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .patient-item:hover {
            border-color: var(--primary);
            background: #f0f9ff;
        }

        .patient-item.active {
            border-color: var(--primary);
            background: #dbeafe;
        }

        .patient-info h3 {
            margin: 0 0 4px 0;
            font-size: 14px;
            font-weight: 600;
        }

        .patient-info p {
            margin: 0;
            font-size: 12px;
            color: var(--muted);
        }

        .patient-status {
            display: inline-block;
            padding: 2px 8px;
            font-size: 11px;
            font-weight: 500;
            margin-top: 6px;
        }

        .status-waiting {
            background: #fef3c7;
            color: #92400e;
        }

        .status-examining {
            background: #dbeafe;
            color: #1d4ed8;
        }

        .status-completed {
            background: #d1fae5;
            color: #065f46;
        }

        /* Card styles */
        .card {
            background: var(--card);
            border: 1px solid var(--line);
            border-radius: 12px;
            box-shadow: 0 1px 0 rgba(0, 0, 0, .02);
        }

        .card-header {
            padding: 12px 16px;
            border-bottom: 1px solid var(--line);
            font-weight: 600;
            font-size: 15px;
        }

        .card-body {
            padding: 16px;
        }

        /* Grid layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
        }

        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        /* Field styles */
        .field {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 12px;
        }

        .field label {
            font-size: 12px;
            color: var(--muted);
            font-weight: 500;
        }


        .section-title {
            font-size: 18px;
            font-weight: 600;
            padding-bottom: 4px;
            border-bottom: 1px solid var(--line);
        }

        /* Scrollable content */
        .scrollable {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        /* Table styles */
        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            text-align: left;
            padding: 10px;
            background: #f9fafb;
            border-bottom: 2px solid var(--line);
            font-size: 12px;
            font-weight: 600;
            color: var(--secondary);
        }

        .table td {
            padding: 10px;
            border-bottom: 1px solid var(--line);
            font-size: 13px;
        }

        .table tbody tr:hover {
            background: #f9fafb;
        }

        /* Diagnosis and prescription */
        .prescription-list,
        .diagnosis-list {
            margin-top: 12px;
        }

        .prescription-item,
        .diagnosis-item {
            padding: 12px;
            background: #f9fafb;
            border: 1px solid var(--line);
            border-radius: 8px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .prescription-info,
        .diagnosis-info {
            flex: 1;
        }

        .prescription-info h4,
        .diagnosis-info h4 {
            margin: 0 0 4px 0;
            font-size: 13px;
            font-weight: 600;
        }

        .prescription-info p,
        .diagnosis-info p {
            margin: 0;
            font-size: 12px;
            color: var(--muted);
        }

        /* Footer actions */
        .footer-actions {
            padding: 12px 16px;
            border-top: 1px solid var(--line);
            background: #f9fafb;
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }

        /* Detail info */
        .detail-info {
            background: #f9fafb;
            padding: 12px;
            border-radius: 8px;
        }

        .detail-info h3 {
            margin: 0 0 12px 0;
            font-size: 16px;
            font-weight: 600;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 13px;
        }

        .detail-label {
            color: var(--muted);
        }

        .detail-value {
            font-weight: 500;
        }

        /* Responsive adjustments */
        @media (max-width: 1200px) {
            :root {
                --sidebar-width: 250px;
                --right-sidebar-width: 300px;
            }

            .grid-4 {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }

            .sidebar-left,
            .sidebar-right {
                width: 100%;
                height: 200px;
            }

            .grid-2,
            .grid-3,
            .grid-4 {
                grid-template-columns: 1fr;
            }
        }

        /* B·∫£ng theo d√µi */
        .timeline-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 12px;
        }

        .timeline-table th,
        .timeline-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--line);
        }

        .timeline-table th {
            background-color: #F5F5F5;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .timeline-table tr:hover {
            background-color: #FAFAFA;
        }

        /* L·ªãch tr√¨nh */
        .schedule-item {
            display: flex;
            gap: 12px;
            padding: 12px;
            border-bottom: 1px solid var(--line);
        }

        .schedule-time {
            font-weight: 600;
            color: var(--primary-dark);
            min-width: 80px;
        }

        .schedule-content {
            flex: 1;
        }

        .schedule-title {
            font-weight: 500;
        }

        .schedule-description {
            color: var(--text-secondary);
            font-size: 13px;
            margin-top: 4px;
        }

        /* Sidebar ph·∫£i: Qu·∫£n l√Ω b·ªánh √°n */
        .sidebar-right {
            background-color: white;
            border-left: 1px solid var(--line);
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .sidebar-section {
            border-bottom: 1px solid var(--line);
        }

        .sidebar-section-header {
            padding: 12px 16px;
            background-color: #E3F2FD;
            font-weight: 600;
            color: var(--primary-dark);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar-section-content {
            padding: 12px;
            max-height: 300px;
            overflow-y: auto;
        }

        /* Th·∫ª y√™u c·∫ßu */
        .request-card {
            background-color: #f5f7fa;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 10px;
            border-left: 4px solid var(--primary);
        }

        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .request-title {
            font-weight: 600;
        }

        .request-status {
            font-size: 11px;
            padding: 3px 6px;
        }

        .request-pending {
            background-color: #FFF8E1;
            color: #FF8F00;
        }

        .request-completed {
            background-color: #E8F5E9;
            color: var(--success);
        }

        .request-details {
            margin-top: 8px;
            font-size: 13px;
            color: var(--text-secondary);
        }
        .patient-status {
            display: inline-block;
            padding: 2px 8px;
            font-size: 11px;
            font-weight: 500;
            margin-top: 6px;
        }

        .status-admitted {
            background: #dbeafe;
            color: #1d4ed8;
        }

        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .status-discharged {
            background: #d1fae5;
            color: #065f46;
        }


    </style>
</head>

<body>
    <div class="container">
        <!-- Sidebar tr√°i: Danh s√°ch b·ªánh nh√¢n -->
        <div class="sidebar-left">
            <div class="header">
                <a href="home.html" style="display: flex; align-items: center;">
                    <div style="width: 40px; height: 40px; background-color: var(--primary); border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 18px;">
                        HIS
                    </div>
                </a>
                <button class="btn primary" style="font-size: 12px; padding: 6px 12px;">Nh·∫≠p vi·ªán m·ªõi</button>
            </div>
            
            <div class="search-bar" style="margin: 12px 12px;">
                <input type="text"
                placeholder="T√¨m ki·∫øm b·ªánh nh√¢n...">
            </div>

            <div class="department-filter" style="margin: 12px 12px;";>
                <select>
                    <option value="">T·∫•t c·∫£ khoa/ph√≤ng</option>
                    <option value="internal">Khoa N·ªôi</option>
                    <option value="surgery">Khoa Ngo·∫°i</option>
                    <option value="pediatrics">Khoa Nhi</option>
                    <option value="obstetrics">Khoa S·∫£n</option>
                    <option value="neurology">Khoa Th·∫ßn kinh</option>
                    <option value="emergency">Khoa C·∫•p c·ª©u</option>
                </select>
            </div>

            <div class="patient-list">
                <!-- B·ªánh nh√¢n ƒëang n·ªôi tr√∫ -->
                <div class="patient-item active">
                    <div class="patient-info">
                        <div>
                            <h3>Nguy·ªÖn VƒÉn A</h3>
                            <p>M√£ BN: 00123456 | 35 tu·ªïi | Nam</p>
                            <p>Ng√†y nh·∫≠p vi·ªán: 15/11/2023</p>
                            <p>Ph√≤ng: 101B | Gi∆∞·ªùng: 03</p>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 4px; align-items: flex-end;">
                            <button class="btn danger" style="font-size: 11px; padding: 4px 8px;">Xu·∫•t vi·ªán</button>
                        </div>
                    </div>
                </div>
                <!-- B·ªánh nh√¢n ƒëang n·ªôi tr√∫ -->
                <div class="patient-item">
                    <div class="patient-info">
                        <div>
                            <h3>Tr·∫ßn Th·ªã B</h3>
                            <p>M√£ BN: 00123457 | 42 tu·ªïi | N·ªØ</p>
                            <p>Ng√†y nh·∫≠p vi·ªán: 16/11/2023</p>
                            <p>Ph√≤ng: 102A | Gi∆∞·ªùng: 01</p>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 4px; align-items: flex-end;">
                        </div>
                    </div>
                </div>
                <!-- B·ªánh nh√¢n ƒëang n·ªôi tr√∫ -->
                <div class="patient-item">
                    <div class="patient-info">
                        <div>
                            <h3>Ph·∫°m VƒÉn C</h3>
                            <p>M√£ BN: 00123458 | 50 tu·ªïi | Nam</p>
                            <p>Ng√†y nh·∫≠p vi·ªán: 17/11/2023</p>
                            <p>Ph√≤ng: 201A | Gi∆∞·ªùng: 02</p>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 4px; align-items: flex-end;">
                        </div>
                    </div>
                </div>
                <!-- B·ªánh nh√¢n ch·ªù nh·∫≠p vi·ªán -->
                <div class="patient-item">
                    <div class="patient-info">
                        <div>
                            <h3>L√™ Th·ªã D</h3>
                            <p>M√£ BN: 00123459 | 28 tu·ªïi | N·ªØ</p>
                            <p>Ng√†y nh·∫≠p vi·ªán d·ª± ki·∫øn: 20/11/2023</p>
                            <p>Ch·ªù ph√≤ng tr·ªëng</p>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 4px; align-items: flex-end;">
                            <span class="patient-status status-pending">Ch·ªù nh·∫≠p vi·ªán</span>
                        </div>
                    </div>
                </div>
                <div class="patient-item">
                    <div class="patient-info">
                        <div>
                            <h3>L√™ Th·ªã D</h3>
                            <p>M√£ BN: 00123459 | 28 tu·ªïi | N·ªØ</p>
                            <p>Ng√†y nh·∫≠p vi·ªán d·ª± ki·∫øn: 20/11/2023</p>
                            <p>Ch·ªù ph√≤ng tr·ªëng</p>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 4px; align-items: flex-end;">
                            <span class="patient-status status-pending">Ch·ªù nh·∫≠p vi·ªán</span>
                        </div>
                    </div>
                </div>
                <div class="patient-item">
                    <div class="patient-info">
                        <div>
                            <h3>L√™ Th·ªã D</h3>
                            <p>M√£ BN: 00123459 | 28 tu·ªïi | N·ªØ</p>
                            <p>Ng√†y nh·∫≠p vi·ªán d·ª± ki·∫øn: 20/11/2023</p>
                            <p>Ch·ªù ph√≤ng tr·ªëng</p>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 4px; align-items: flex-end;">
                            <span class="patient-status status-pending">Ch·ªù nh·∫≠p vi·ªán</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content" style="padding: 12px;">
            <!-- Th√¥ng tin b·ªánh nh√¢n -->
            <div class="section">
                <h2 class="section-title">Th√¥ng tin b·ªánh nh√¢n</h2>
                <div class="grid-4">
                    <div class="detail-row">
                        <span class="detail-label">H·ªç v√† t√™n:</span>
                        <span class="detail-value">Nguy·ªÖn VƒÉn A</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Gi·ªõi t√≠nh / Tu·ªïi:</span>
                        <span class="detail-value">Nam / 35 tu·ªïi</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Ng√†y sinh:</span>
                        <span class="detail-value">15/03/1988</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">M√£ b·ªánh nh√¢n:</span>
                        <span class="detail-value">00123456</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">CCCD:</span>
                        <span class="detail-value">079212345678</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">ƒêi·ªán tho·∫°i:</span>
                        <span class="detail-value">0987654321</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Lo·∫°i b·∫£o hi·ªÉm:</span>
                        <span class="detail-value">BHYT</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">S·ªë BHYT:</span>
                        <span class="detail-value">123456789</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Ng√†y nh·∫≠p vi·ªán:</span>
                        <span class="detail-value">15/11/2023</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">D·ª± ki·∫øn xu·∫•t vi·ªán:</span>
                        <span class="detail-value">25/11/2023</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Khoa ƒëi·ªÅu tr·ªã:</span>
                        <span class="detail-value">Khoa N·ªôi</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Ph√≤ng / Gi∆∞·ªùng:</span>
                        <span class="detail-value">101B / 03</span>
                    </div>
                </div>
            </div>

            <!-- T√¨nh h√¨nh ƒëi·ªÅu tr·ªã -->
            <div class="section">
                <h2 class="section-title">Theo d√µi ƒëi·ªÅu tr·ªã</h2>
                <table class="timeline-table">
                    <thead>
                        <tr>
                            <th>Ng√†y gi·ªù</th>
                            <th>Ho·∫°t ƒë·ªông</th>
                            <th>Th·ª±c hi·ªán b·ªüi</th>
                            <th>Tr·∫°ng th√°i</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>15/11/2023 10:30</td>
                            <td>Nh·∫≠p vi·ªán, kh√°m ƒë·∫ßu ti√™n</td>
                            <td>BS. Nguy·ªÖn VƒÉn Minh</td>
                            <td>Ho√†n th√†nh</td>
                        </tr>
                        <tr>
                            <td>15/11/2023 11:00</td>
                            <td>X√©t nghi·ªám m√°u</td>
                            <td>YS. Tr·∫ßn Th·ªã Hoa</td>
                            <td>Ho√†n th√†nh</td>
                        </tr>
                        <tr>
                            <td>15/11/2023 14:00</td>
                            <td>Xquang ng·ª±c</td>
                            <td>YS. Ph·∫°m VƒÉn S∆°n</td>
                            <td>Ho√†n th√†nh</td>
                        </tr>
                        <tr>
                            <td>15/11/2023 18:00</td>
                            <td>ƒêi·ªÅu tr·ªã kh√°ng sinh</td>
                            <td>YT. L√™ Th·ªã Ng·ªçc</td>
                            <td>Ho√†n th√†nh</td>
                        </tr>
                        <tr>
                            <td>16/11/2023 08:00</td>
                            <td>Nh·∫≠p h·ªì s∆° s·ª©c kh·ªèe</td>
                            <td>YT. Nguy·ªÖn Th·ªã Mai</td>
                            <td>Ho√†n th√†nh</td>
                        </tr>
                        <tr>
                            <td>16/11/2023 10:00</td>
                            <td>Kh√°m l·∫°i</td>
                            <td>BS. Nguy·ªÖn VƒÉn Minh</td>
                            <td>Ho√†n th√†nh</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="footer-actions" style="margin: 12px;">
                <button class="btn secondary" onclick="printRecord()">In h·ªì s∆°</button>
                <button class="btn warning" onclick="addNote()">Th√™m ghi ch√∫</button>
                <button class="btn primary" onclick="updateTreatment()">C·∫≠p nh·∫≠t ƒëi·ªÅu tr·ªã</button>
                <button class="btn danger" onclick="dischargePatient()">Xu·∫•t vi·ªán</button>
            </div>
        </div>


        <!-- Sidebar ph·∫£i: Qu·∫£n l√Ω b·ªánh √°n -->
        <div class="sidebar-right">
            <!-- L·ªãch tr√¨nh ng√†y h√¥m nay -->
            <div class="sidebar-section">
                <div class="sidebar-section-header">
                    <span>L·ªãch tr√¨nh h√¥m nay</span>
                    <button class="btn primary" style="font-size: 11px; padding: 4px 8px;" onclick="openSchedulePopup()">Th√™m</button>
                </div>
                <div class="sidebar-section-content">
                    <div class="schedule-item">
                        <div class="schedule-time">08:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">Nh·∫≠p h·ªì s∆° s·ª©c kh·ªèe</div>
                            <div class="schedule-description">Nh·∫≠p nhi·ªát ƒë·ªô, huy·∫øt √°p, nh·ªãp tim, nh·ªãp th·ªü</div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-time">10:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">Kh√°m l·∫°i</div>
                            <div class="schedule-description">B√°c sƒ© Nguy·ªÖn VƒÉn Minh</div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-time">14:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">Th·ª≠ nghi·ªám m√°u</div>
                            <div class="schedule-description">X√°c ƒë·ªãnh n·ªìng ƒë·ªô thu·ªëc kh√°ng sinh</div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-time">18:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">ƒêi·ªÅu tr·ªã kh√°ng sinh</div>
                            <div class="schedule-description">YT. L√™ Th·ªã Ng·ªçc</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Y√™u c·∫ßu ki·ªÉm tra, x√©t nghi·ªám -->
            <div class="sidebar-section">
                <div class="sidebar-section-header">
                    <span>Y√™u c·∫ßu</span>
                    <button class="btn primary" style="font-size: 11px; padding: 4px 8px;" onclick="openRequestPopup()">Th√™m</button>
                </div>
                <div class="sidebar-section-content">
                    <div class="request-card">
                        <div class="request-header">
                            <div class="request-title">X√©t nghi·ªám m√°u</div>
                            <span class="request-status request-completed">Ho√†n th√†nh</span>
                        </div>
                        <div class="request-details">
                            <p>Ng√†y t·∫°o: 15/11/2023 11:00</p>
                            <p>Y√™u c·∫ßu b·ªüi: BS. Nguy·ªÖn VƒÉn Minh</p>
                        </div>
                    </div>
                    <div class="request-card">
                        <div class="request-header">
                            <div class="request-title">Xquang ng·ª±c</div>
                            <span class="request-status request-completed">Ho√†n th√†nh</span>
                        </div>
                        <div class="request-details">
                            <p>Ng√†y t·∫°o: 15/11/2023 14:00</p>
                            <p>Y√™u c·∫ßu b·ªüi: BS. Nguy·ªÖn VƒÉn Minh</p>
                        </div>
                    </div>
                    <div class="request-card">
                        <div class="request-header">
                            <div class="request-title">X√©t nghi·ªám ph√¢n t√≠ch m√°u</div>
                            <span class="request-status request-pending">Ch·ªù th·ª±c hi·ªán</span>
                        </div>
                        <div class="request-details">
                            <p>Ng√†y t·∫°o: 16/11/2023 10:00</p>
                            <p>Y√™u c·∫ßu b·ªüi: BS. Nguy·ªÖn VƒÉn Minh</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- H·ªì s∆° b·ªánh √°n s·ªë h√≥a -->
            <div class="sidebar-section">
                <div class="sidebar-section-header">
                    <span>H·ªì s∆° b·ªánh √°n s·ªë h√≥a</span>
                    <button class="btn primary" style="font-size: 11px; padding: 4px 8px;" onclick="openFileUploadPopup()">T·∫£i l√™n</button>
                </div>
                <div class="sidebar-section-content">
                    <div class="file-list">
                        <!-- File m·∫´u 1 -->
                        <div class="file-item">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <div>
                                    <div style="display: flex; align-items: center; gap: 6px;">
                                        <div style="font-weight: 500; font-size: 13px;">Phi·∫øu nh·∫≠p vi·ªán.pdf</div>
                                        <span class="badge" style="background-color: #4CAF50; color: white; padding: 2px 6px; font-size: 10px; border-radius: 10px; display: inline-block;">ƒê√£ k√Ω</span>
                                    </div>
                                    <div style="font-size: 11px; color: var(--text-secondary);">15/11/2023 - 2.5MB</div>
                                </div>
                            </div>
                            <button class="btn primary" style="font-size: 11px; padding: 4px 8px; margin-top: 8px; width: 100%;">Xem</button>
                        </div>

                        <!-- File m·∫´u 2 -->
                        <div class="file-item">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <div>
                                    <div style="display: flex; align-items: center; gap: 6px;">
                                        <div style="font-weight: 500; font-size: 13px;">K·∫øt qu·∫£ xquang.jpg</div>
                                        <span class="badge" style="background-color: #4CAF50; color: white; padding: 2px 6px; font-size: 10px; border-radius: 10px; display: inline-block;">ƒê√£ k√Ω</span>
                                    </div>
                                    <div style="font-size: 11px; color: var(--text-secondary);">15/11/2023 - 5.8MB</div>
                                </div>
                            </div>
                            <button class="btn primary" style="font-size: 11px; padding: 4px 8px; margin-top: 8px; width: 100%;">Xem</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-actions">
                <button class="btn secondary" style="flex: 1;">BHYT</button>
                <button class="btn secondary" style="flex: 1;">B·ªánh √°n ƒëi·ªán t·ª≠</button>
            </div>
        </div>
    </div>

    <script>
        // Ch·ª©c nƒÉng ch·ªçn b·ªánh nh√¢n trong danh s√°ch
        document.querySelectorAll('.patient-item').forEach(item => {
            item.addEventListener('click', function () {
                // Lo·∫°i b·ªè l·ªõp active t·ª´ t·∫•t c·∫£ c√°c items
                document.querySelectorAll('.patient-item').forEach(p => p.classList.remove('active'));
                // Th√™m l·ªõp active cho item ƒë∆∞·ª£c ch·ªçn
                this.classList.add('active');
                // ·ªû ƒë√¢y c√≥ th·ªÉ load th√¥ng tin b·ªánh nh√¢n t∆∞∆°ng ·ª©ng
                loadPatientInfo(this.querySelector('.patient-info h3').textContent);
            });
        });

        // T·∫£i th√¥ng tin b·ªánh nh√¢n
        function loadPatientInfo(patientName) {
            // Trong th·ª±c t·∫ø, ƒë√¢y s·∫Ω l√† m·ªôt y√™u c·∫ßu AJAX ƒë·ªÉ l·∫•y d·ªØ li·ªáu b·ªánh nh√¢n
            console.log('Loading information for patient:', patientName);
            // C·∫≠p nh·∫≠t t√™n b·ªánh nh√¢n trong ph·∫ßn chi ti·∫øt
            document.querySelector('.detail-value').textContent = patientName;
        }

        // L∆∞u k·∫øt qu·∫£ ƒëo b·ªánh
        function saveExamination() {
            alert('‚úÖ K·∫øt qu·∫£ ƒëo b·ªánh ƒë√£ ƒë∆∞·ª£c l∆∞u th√†nh c√¥ng!');
        }

        // T·∫°o v√† in ƒë∆°n thu·ªëc
        function generatePrescription() {
            alert('‚úÖ ƒê∆°n thu·ªëc ƒë√£ ƒë∆∞·ª£c t·∫°o. ƒêang chu·∫©n b·ªã in...');
            // Trong th·ª±c t·∫ø, ƒë√¢y s·∫Ω m·ªü m·ªôt c·ª≠a s·ªï in ho·∫∑c t·∫£i t·ªáp PDF
        }

        // L√†m l·∫°i phi·∫øu ƒëo
        function resetForm() {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën l√†m l·∫°i phi·∫øu ƒëo? T·∫•t c·∫£ d·ªØ li·ªáu ch∆∞a l∆∞u s·∫Ω b·ªã m·∫•t.')) {
                // X√≥a t·∫•t c·∫£ d·ªØ li·ªáu trong form
                document.querySelectorAll('input, textarea').forEach(el => el.value = '');
                // X√≥a danh s√°ch ch·ªâ ƒë·ªãnh v√† thu·ªëc
                document.querySelectorAll('.diagnosis-list, .prescription-list').forEach(list => {
                    list.innerHTML = '';
                });
            }
        }

        // Th√™m s·ª± ki·ªán cho n√∫t Th√™m ch·ªâ ƒë·ªãnh
        document.querySelector('.btn.primary').addEventListener('click', function () {
            // Trong th·ª±c t·∫ø, ƒë√¢y s·∫Ω x·ª≠ l√Ω vi·ªác th√™m ch·ªâ ƒë·ªãnh v√†o danh s√°ch
            console.log('Adding new diagnosis...');
        });

        // Th√™m d·ªãch v·ª• v√†o danh s√°ch d·ªãch v·ª• ƒë√£ ch·ªçn
        function addServiceToSelected() {
            // L·∫•y th√¥ng tin d·ªãch v·ª• (trong th·ª±c t·∫ø s·∫Ω l·∫•y t·ª´ h√†ng ƒë∆∞·ª£c ch·ªçn trong b·∫£ng)
            const serviceInfo = {
                name: "X√©t nghi·ªám huy·∫øt sugar", // Th√¥ng tin m·∫´u, s·∫Ω l·∫•y t·ª´ b·∫£ng d·ªãch v·ª•
                quantity: 1,
                price: 150000
            };

            // L·∫•y b·∫£ng d·ªãch v·ª• ƒë√£ ch·ªçn
            const selectedServicesHeader = Array.from(document.querySelectorAll('h4')).find(h4 => h4.textContent.trim() === 'D·ªãch v·ª• ƒë√£ ch·ªçn');
            const tableBody = selectedServicesHeader.nextElementSibling.querySelector('table tbody');

            // Ki·ªÉm tra n·∫øu b·∫£ng ƒëang hi·ªÉn th·ªã th√¥ng b√°o "Ch∆∞a ch·ªçn d·ªãch v·ª• n√†o"
            const emptyRow = tableBody.querySelector('tr td[colspan="6"]');
            if (emptyRow) {
                // X√≥a h√†ng tr·ªëng
                tableBody.innerHTML = '';
            }

            // T·∫°o STT d·ª±a tr√™n s·ªë h√†ng hi·ªán t·∫°i
            const stt = tableBody.children.length + 1;

            // T·∫°o m·ªôt h√†ng m·ªõi
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td style="padding: 8px; border-bottom: 1px solid #ddd;">${stt}</td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd;">${serviceInfo.name}</td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd;">
                    <input type="number" value="${serviceInfo.quantity}" min="1" style="width: 60px; padding: 4px;">
                </td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd;">${formatCurrency(serviceInfo.price)}</td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd;">${formatCurrency(serviceInfo.price * serviceInfo.quantity)}</td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd;">
                    <button class="btn danger" onclick="removeSelectedService(this)" style="padding: 2px 8px; font-size: 10px;">X√≥a</button>
                </td>
            `;

            // Th√™m h√†ng v√†o b·∫£ng
            tableBody.appendChild(newRow);
        }

        // X√≥a d·ªãch v·ª• kh·ªèi danh s√°ch ƒë√£ ch·ªçn
        function removeSelectedService(button) {
            const row = button.closest('tr');
            row.remove();

            // C·∫≠p nh·∫≠t l·∫°i STT
            const selectedServicesHeader = Array.from(document.querySelectorAll('h4')).find(h4 => h4.textContent.trim() === 'D·ªãch v·ª• ƒë√£ ch·ªçn');
            const tableBody = selectedServicesHeader.nextElementSibling.querySelector('table tbody');
            const rows = tableBody.querySelectorAll('tr');

            if (rows.length === 0) {
                // N·∫øu kh√¥ng c√≤n h√†ng n√†o, hi·ªÉn th·ªã th√¥ng b√°o tr·ªëng
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="6"
                            style="text-align: center; padding: 15px; color: #999; font-style: italic;">
                            Ch∆∞a ch·ªçn d·ªãch v·ª• n√†o
                        </td>
                    </tr>
                `;
            } else {
                // C·∫≠p nh·∫≠t STT cho c√°c h√†ng c√≤n l·∫°i
                rows.forEach((row, index) => {
                    row.querySelector('td:first-child').textContent = index + 1;
                });
            }
        }

        // ƒê·ªãnh d·∫°ng ti·ªÅn t·ªá
        function formatCurrency(amount) {
            return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount);
        }

        // File Upload Popup Functions
        function openFileUploadPopup() {
            document.getElementById('fileUploadPopup').style.display = 'block';
            // Reset upload method to file by default
            selectUploadMethod('file');
            // Reset file input and preview
            document.getElementById('fileInput').value = '';
            document.getElementById('filePreview').style.display = 'none';
        }

        function closeFileUploadPopup() {
            document.getElementById('fileUploadPopup').style.display = 'none';
            stopCameraScan();
        }

        function selectUploadMethod(method) {
            // Reset both options
            document.getElementById('fileOption').style.borderColor = '#ddd';
            document.getElementById('fileOption').style.backgroundColor = '#f5f5f5';
            document.getElementById('cameraOption').style.borderColor = '#ddd';
            document.getElementById('cameraOption').style.backgroundColor = '#f5f5f5';

            // Show selected option
            if (method === 'file') {
                document.getElementById('fileOption').style.borderColor = '#2196F3';
                document.getElementById('fileOption').style.backgroundColor = '#e3f2fd';
                document.getElementById('fileUploadArea').style.display = 'block';
                document.getElementById('cameraScanArea').style.display = 'none';
                stopCameraScan();
            } else if (method === 'camera') {
                document.getElementById('cameraOption').style.borderColor = '#2196F3';
                document.getElementById('cameraOption').style.backgroundColor = '#e3f2fd';
                document.getElementById('fileUploadArea').style.display = 'none';
                document.getElementById('cameraScanArea').style.display = 'block';
            }
        }

        // Handle file selection
        document.getElementById('fileInput').addEventListener('change', function (e) {
            if (e.target.files && e.target.files[0]) {
                const file = e.target.files[0];

                // Validate file size (10MB limit)
                if (file.size > 10 * 1024 * 1024) {
                    alert('T·ªáp qu√° l·ªõn. Vui l√≤ng ch·ªçn t·ªáp nh·ªè h∆°n 10MB.');
                    return;
                }

                // Validate file type
                const validTypes = ['application/pdf', 'image/jpeg', 'image/png', 'image/jpg'];
                if (!validTypes.includes(file.type)) {
                    alert('ƒê·ªãnh d·∫°ng t·ªáp kh√¥ng ƒë∆∞·ª£c h·ªó tr·ª£. Vui l√≤ng ch·ªçn t·ªáp PDF, JPG ho·∫∑c PNG.');
                    return;
                }

                // Show file preview
                showFilePreview(file);
            }
        });

        function showFilePreview(file) {
            const previewContainer = document.getElementById('filePreview');
            const fileNameElement = document.getElementById('previewFileName');
            const previewContent = document.getElementById('previewContent');

            // Set file name
            fileNameElement.textContent = file.name;

            // Clear previous preview
            previewContent.innerHTML = '';

            if (file.type.startsWith('image/')) {
                // Image preview
                const img = document.createElement('img');
                img.style.maxWidth = '100%';
                img.style.maxHeight = '200px';
                img.src = URL.createObjectURL(file);
                previewContent.appendChild(img);
            } else if (file.type === 'application/pdf') {
                // PDF preview
                const pdfIcon = document.createElement('div');
                pdfIcon.style.fontSize = '64px';
                pdfIcon.textContent = 'üìÑ';
                previewContent.appendChild(pdfIcon);

                const pdfName = document.createElement('div');
                pdfName.style.marginTop = '10px';
                pdfName.style.fontSize = '14px';
                previewContent.appendChild(pdfName);
            }

            // Show preview
            previewContainer.style.display = 'block';
        }

        function removeSelectedFile() {
            document.getElementById('fileInput').value = '';
            document.getElementById('filePreview').style.display = 'none';
        }

        // Camera scan functions
        let stream = null;
        let canvas = null;
        let capturedImages = [];

        function startCameraScan() {
            document.getElementById('startCameraScan').style.display = 'none';
            const cameraPreview = document.getElementById('cameraPreview');
            const camera = document.getElementById('camera');
            const cameraButtons = document.getElementById('cameraButtons');
            const capturedPhotosSection = document.getElementById('capturedPhotosSection');

            // Clear previously captured images
            capturedImages = [];
            updateCapturedPhotosDisplay();

            // Create canvas for capturing
            canvas = document.createElement('canvas');
            canvas.width = 640;
            canvas.height = 480;

            // Request camera access
            navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
                .then(function (mediaStream) {
                    stream = mediaStream;
                    const video = document.createElement('video');
                    video.style.width = '100%';
                    video.style.height = '100%';
                    video.srcObject = stream;
                    video.autoplay = true;
                    video.playsInline = true;

                    cameraPreview.innerHTML = '';
                    cameraPreview.appendChild(video);
                    
                    // Show all necessary elements with proper flex display
                    camera.style.display = 'flex';
                    cameraButtons.style.display = 'flex';
                    cameraButtons.style.justifyContent = 'center';
                    capturedPhotosSection.style.display = 'flex';
                })
                .catch(function (err) {
                    alert('Kh√¥ng th·ªÉ truy c·∫≠p camera: ' + err.message);
                });
        }

        function stopCameraScan() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
            }

            const cameraPreview = document.getElementById('cameraPreview');
            const cameraButtons = document.getElementById('cameraButtons');
            const camera = document.getElementById('camera');
            const capturedPhotosSection = document.getElementById('capturedPhotosSection');

            cameraPreview.innerHTML = '';
            cameraButtons.style.display = 'none';
            camera.style.display = 'none';
            capturedPhotosSection.style.display = 'none';
            document.getElementById('startCameraScan').style.display = 'block';
        }

        function captureImage() {
            if (!stream) return;

            const video = document.querySelector('#cameraPreview video');
            if (!video) return;

            // Draw video frame to canvas
            canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);

            // Convert canvas to blob
            canvas.toBlob(function (blob) {
                // Save image in array
                capturedImages.push(blob);

                // Update the display
                updateCapturedPhotosDisplay();

                // Show success feedback
                //alert('·∫¢nh ƒë√£ ƒë∆∞·ª£c ch·ª•p th√†nh c√¥ng!');
            }, 'image/jpeg');
        }

        function updateCapturedPhotosDisplay() {
            const photosCountElement = document.getElementById('photosCount');
            const capturedPhotosContainer = document.getElementById('capturedPhotos');

            // Update count
            photosCountElement.textContent = capturedImages.length;

            // Clear and rebuild thumbnails
            capturedPhotosContainer.innerHTML = '';

            if (capturedImages.length === 0) {
                const emptyMessage = document.createElement('div');
                emptyMessage.style.color = '#666';
                emptyMessage.style.padding = '20px';
                emptyMessage.style.fontSize = '14px';
                emptyMessage.textContent = 'Ch∆∞a ch·ª•p ·∫£nh n√†o';
                capturedPhotosContainer.appendChild(emptyMessage);
                return;
            }

            // Create thumbnails for each captured image
            capturedImages.forEach((blob, index) => {
                const thumbnailContainer = document.createElement('div');
                thumbnailContainer.style.position = 'relative';
                thumbnailContainer.style.width = '100px';
                thumbnailContainer.style.height = '100px';
                thumbnailContainer.style.border = '1px solid #ddd';
                thumbnailContainer.style.borderRadius = '4px';
                thumbnailContainer.style.overflow = 'hidden';
                thumbnailContainer.style.backgroundColor = '#f0f0f0';

                const img = document.createElement('img');
                img.src = URL.createObjectURL(blob);
                img.style.width = '100%';
                img.style.height = '100%';
                img.style.objectFit = 'cover';

                const removeButton = document.createElement('button');
                removeButton.innerHTML = '&times;';
                removeButton.style.position = 'absolute';
                removeButton.style.top = '2px';
                removeButton.style.right = '2px';
                removeButton.style.width = '20px';
                removeButton.style.height = '20px';
                removeButton.style.border = 'none';
                removeButton.style.borderRadius = '50%';
                removeButton.style.backgroundColor = 'rgba(244, 67, 54, 0.8)';
                removeButton.style.color = 'white';
                removeButton.style.cursor = 'pointer';
                removeButton.style.fontSize = '12px';
                removeButton.style.display = 'flex';
                removeButton.style.justifyContent = 'center';
                removeButton.style.alignItems = 'center';
                removeButton.onclick = function () {
                    // Remove this image
                    capturedImages.splice(index, 1);
                    updateCapturedPhotosDisplay();
                };

                thumbnailContainer.appendChild(img);
                thumbnailContainer.appendChild(removeButton);
                capturedPhotosContainer.appendChild(thumbnailContainer);
            });
        }

        function generatePDF() {
            if (capturedImages.length === 0) {
                alert('Vui l√≤ng ch·ª•p √≠t nh·∫•t m·ªôt ·∫£nh tr∆∞·ªõc khi t·∫°o PDF');
                return;
            }

            // For demo purposes, we'll just convert the first image to a PDF-like file
            // In a real application, you would use a library like jsPDF to merge images
            const pdfBlob = new Blob([capturedImages[0]], { type: 'application/pdf' });
            const file = new File([pdfBlob], 'merged_document.pdf', { type: 'application/pdf' });

            // Show preview of the generated PDF
            showFilePreview(file);

            // Provide feedback
            alert(`ƒê√£ t·∫°o PDF t·ª´ ${capturedImages.length} ·∫£nh th√†nh c√¥ng!`);
        }

        function uploadSelectedFile() {
            // Here you would typically handle the file upload to your server
            // For demo purposes, we'll just show a success message
            alert('T·ªáp ƒë√£ ƒë∆∞·ª£c t·∫£i l√™n th√†nh c√¥ng!');
            closeFileUploadPopup();
        }
    </script>
</body>

</html>
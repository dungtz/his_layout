<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HIS - Hồ sơ bệnh án điện tử</title>
    <style>
        :root {
            --bg: #f6f7f9;
            --card: #fff;
            --line: #e5e7eb;
            --txt: #111827;
            --muted: #6b7280;
            --primary: #2563eb;
            --secondary: #4b5563;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --sidebar-width: 300px;
            --right-sidebar-width: 350px;
        }

        * {
            box-sizing: border-box;
        }

        html,
        body {
            height: 100%;
            margin: 0;
            font: 14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
            color: var(--txt);
            background: var(--bg);
        }

        /* Layout tổng thể */
        .container {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* Sidebar trái - Danh sách bệnh nhân */
        .sidebar-left {
            width: var(--sidebar-width);
            background: var(--card);
            border-right: 1px solid var(--line);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Main content - Hồ sơ bệnh án */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 0;
            background: var(--bg);
        }

        /* Sidebar phải - File đính kèm, ký số */
        .sidebar-right {
            width: var(--right-sidebar-width);
            background: var(--card);
            border-left: 1px solid var(--line);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header chung */
        .header {
            padding: 12px 16px;
            background: var(--card);
            border-bottom: 1px solid var(--line);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h2 {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
        }

        .header-actions {
            display: flex;
            gap: 8px;
        }

        /* Logo styles */
        .logo-link {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: inherit;
        }

        .logo {
            width: 40px;
            height: 40px;
            background-color: #4CAF50;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }

        /* Button styles */
        .btn {
            padding: 8px 12px;
            border: 1px solid var(--line);
            border-radius: 8px;
            background: #fff;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }

        .btn:hover {
            background: #f9fafb;
        }

        .btn.primary {
            background: var(--primary);
            color: #fff;
            border-color: var(--primary);
        }

        .btn.primary:hover {
            background: #1d4ed8;
        }

        .btn.danger {
            background: var(--danger);
            color: #fff;
            border-color: var(--danger);
        }

        .btn.danger:hover {
            background: #dc2626;
        }

        .btn.success {
            background: var(--success);
            color: #fff;
            border-color: var(--success);
        }

        .btn.success:hover {
            background: #059669;
        }

        .btn-small {
            font-size: 11px;
            padding: 4px 8px;
        }

        /* Input styles */
        input[type="text"],
        input[type="date"],
        input[type="time"],
        select,
        textarea {
            width: 100%;
            padding: 5px 5px;
            border: 1px solid var(--line);
            border-radius: 8px;
            background: #fff;
            outline: none;
            font-size: 14px;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* Patient list */
        .patient-list {
            flex: 1;
            overflow-y: auto;
            padding: 8px;
        }

        .patient-item {
            padding: 12px;
            background: var(--card);
            border: 1px solid var(--line);
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .patient-item:hover {
            border-color: var(--primary);
            background: #f0f9ff;
        }

        .patient-item.active {
            border-color: var(--primary);
            background: #dbeafe;
        }

        .patient-info h3 {
            margin: 0 0 4px 0;
            font-size: 14px;
            font-weight: 600;
        }

        .patient-info p {
            margin: 0;
            font-size: 12px;
            color: var(--muted);
        }

        /* Department selector */
        .department-selector {
            display: flex;
            gap: 8px;
            margin: 8px;
        }

        .select-small {
            padding: 6px 8px;
            font-size: 12px;
            border-radius: 4px;
            border: 1px solid var(--line);
            background-color: white;
        }

        /* Card styles */
        .card {
            background: var(--card);
            border: 1px solid var(--line);
            border-radius: 12px;
            box-shadow: 0 1px 0 rgba(0, 0, 0, .02);
            margin-bottom: 16px;
        }

        .card-header {
            padding: 12px 16px;
            border-bottom: 1px solid var(--line);
            font-weight: 600;
            font-size: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-body {
            padding: 16px;
            border: 1px solid var(--line);
            border-radius: 12px;
        }

        /* Grid layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
        }

        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        /* Field styles */
        .field {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 12px;
        }

        .field label {
            font-size: 12px;
            color: var(--muted);
            font-weight: 500;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
            padding-bottom: 4px;
            border-bottom: 1px solid var(--line);
        }

        /* Scrollable content */
        .scrollable {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        /* Table styles */
        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            text-align: left;
            padding: 10px;
            background: #f9fafb;
            border-bottom: 2px solid var(--line);
            font-size: 12px;
            font-weight: 600;
            color: var(--secondary);
        }

        .table td {
            padding: 10px;
            border-bottom: 1px solid var(--line);
            font-size: 13px;
        }

        .table tbody tr:hover {
            background: #f9fafb;
        }

        /* Footer actions */
        .footer-actions {
            padding: 12px 16px;
            border-top: 1px solid var(--line);
            background: #f9fafb;
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }

        /* Tab styles */
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border: 1px solid transparent;
            border-bottom: none;
            background-color: transparent;
            border-top-left-radius: 6px;
            border-top-right-radius: 6px;
            transition: all 0.2s;
        }

        .tab.active {
            background-color: white;
            border-color: var(--line);
            font-weight: 500;
            color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Tab styles */
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border: 1px solid transparent;
            border-bottom: none;
            background-color: transparent;
            border-top-left-radius: 6px;
            border-top-right-radius: 6px;
            transition: all 0.2s;
        }

        .tab.active {
            background-color: white;
            border-color: var(--line);
            font-weight: 500;
            color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Detail info */
        .detail-info {
            background: #f9fafb;
            padding: 12px;
            border-radius: 8px;
        }

        .detail-info h3 {
            margin: 0 0 12px 0;
            font-size: 16px;
            font-weight: 600;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 13px;
        }

        .detail-label {
            color: var(--muted);
        }

        .detail-value {
            font-weight: 500;
        }

        /* File upload and attachments */
        .file-upload-area {
            border: 2px dashed var(--line);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 16px;
        }

        .file-upload-area:hover {
            border-color: var(--primary);
            background: #f0f9ff;
        }

        .file-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .file-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px;
            border: 1px solid var(--line);
            border-radius: 6px;
            background: #f9fafb;
        }

        .file-icon {
            width: 32px;
            height: 32px;
            background: #e5e7eb;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .file-info {
            flex: 1;
            min-width: 0;
        }

        .file-name {
            font-size: 12px;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .file-meta {
            font-size: 11px;
            color: var(--muted);
        }

        .file-actions {
            display: flex;
            gap: 4px;
        }

        /* Electronic signature */
        .signature-pad {
            border: 1px solid var(--line);
            border-radius: 8px;
            background: #fff;
            height: 150px;
            cursor: crosshair;
        }

        .signature-info {
            margin-top: 12px;
            padding: 12px;
            background: #f9fafb;
            border-radius: 8px;
            font-size: 12px;
        }

        /* History timeline */
        .timeline {
            position: relative;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 5px;
            top: 0;
            bottom: 0;
            background: var(--line);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 16px;
            padding-left: 20px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -5px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--primary);
            border: 2px solid #fff;
        }

        .timeline-date {
            font-size: 11px;
            color: var(--muted);
            margin-bottom: 4px;
        }

        .timeline-content {
            font-size: 13px;
        }

        /* Version management */
        .version-selector {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-bottom: 16px;
        }

        .version-item {
            padding: 6px 12px;
            border: 1px solid var(--line);
            border-radius: 16px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .version-item:hover {
            background: #f9fafb;
        }

        .version-item.active {
            background: var(--primary);
            color: #fff;
            border-color: var(--primary);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
        }

        .close-modal {
            font-size: 24px;
            cursor: pointer;
            color: var(--muted);
        }

        /* Filter section */
        .filter-section {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
            padding: 12px;
            background: #f9fafb;
            border-radius: 8px;
        }

        /* Form actions */
        .form-actions {
            display: flex;
            gap: 8px;
            margin-top: 16px;
            justify-content: flex-end;
        }

        /* Responsive adjustments */
        @media (max-width: 1200px) {
            :root {
                --sidebar-width: 250px;
                --right-sidebar-width: 300px;
            }

            .grid-4 {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }

            .sidebar-left,
            .sidebar-right {
                width: 100%;
                height: 200px;
            }

            .grid-2,
            .grid-3,
            .grid-4 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Sidebar trái: Danh sách bệnh nhân -->
        <div class="sidebar-left">
            <div class="header">
                <a href="home.html" class="logo-link">
                    <div class="logo">HIS</div>
                </a>
                <button class="btn btn-small primary">Tìm bệnh nhân</button>
            </div>

            <div class="filter-section">
                <input type="text" placeholder="Nhập tên bệnh nhân..." style="font-size: 12px; padding: 8px;">
                <button class="btn btn-small">Tìm kiếm</button>
            </div>

            <div class="department-selector">
                <select class="select-small">
                    <option value="">Chọn khoa</option>
                    <option value="noi">Khoa Nội</option>
                    <option value="ngoai">Khoa Ngoại</option>
                    <option value="san">Khoa Sản</option>
                    <option value="nha">Khoa Nha Khoa</option>
                </select>
                <select class="select-small">
                    <option value="">Chọn phòng</option>
                    <option value="p1">Phòng 1</option>
                    <option value="p2">Phòng 2</option>
                    <option value="p3">Phòng 3</option>
                    <option value="p4">Phòng 4</option>
                </select>
            </div>

            <div class="patient-list">
                <!-- Bệnh nhân đang được chọn -->
                <div class="patient-item active">
                    <div class="patient-info">
                        <h3>Nguyễn Văn A</h3>
                        <p>Tuổi: 35 | Nam</p>
                        <p>CCCD: 079212345678</p>
                        <p>Số BHYT: 123456789</p>
                    </div>
                </div>

                <!-- Các bệnh nhân khác -->
                <div class="patient-item">
                    <div class="patient-info">
                        <h3>Trần Thị B</h3>
                        <p>Tuổi: 42 | Nữ</p>
                        <p>CCCD: 079212345679</p>
                        <p>Số BHYT: 123456790</p>
                    </div>
                </div>

                <div class="patient-item">
                    <div class="patient-info">
                        <h3>Trần Thị C</h3>
                        <p>Tuổi: 28 | Nữ</p>
                        <p>CCCD: 079212345680</p>
                        <p>Số BHYT: 123456791</p>
                    </div>
                </div>

                <div class="patient-item">
                    <div class="patient-info">
                        <h3>Trần Thị D</h3>
                        <p>Tuổi: 55 | Nữ</p>
                        <p>CCCD: 079212345681</p>
                        <p>Số BHYT: 123456792</p>
                    </div>
                </div>

                <div class="patient-item">
                    <div class="patient-info">
                        <h3>Trần Văn E</h3>
                        <p>Tuổi: 65 | Nam</p>
                        <p>CCCD: 079212345682</p>
                        <p>Số BHYT: 123456793</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main content: Hồ sơ bệnh án -->
        <div class="main-content">
            <div class="header">
                <h2>Hồ sơ bệnh án điện tử - Nguyễn Văn A</h2>
                <div class="header-actions">
                    <button class="btn" onclick="showCreateRecordModal()">Tạo hồ sơ mới</button>
                </div>
            </div>

            <style>
                    .badge {
                        padding: 3px 8px;
                        border-radius: 4px;
                        font-size: 12px;
                        font-weight: bold;
                    }
                    .badge-success {
                        background-color: #28a745;
                        color: white;
                    }
                    .badge-warning {
                        background-color: #ffc107;
                        color: #212529;
                    }
                    .badge-danger {
                        background-color: #dc3545;
                        color: white;
                    }
                    .btn-sm {
                        padding: 2px 8px;
                        font-size: 12px;
                    }
                </style>
                <div class="scrollable">
                <!-- Tab Navigation -->
                <div class="tab-navigation">
                    <button class="tab active" onclick="openTab(event, 'tab-checklist')">Check list</button>
                    <button class="tab" onclick="openTab(event, 'tab-bia')">Bìa bệnh án</button>
                    <button class="tab" onclick="openTab(event, 'tab-thongtin')">A. Bệnh án</button>
                    <button class="tab" onclick="openTab(event, 'tab-tongket')">B. Tổng kết bệnh án</button>
                    <button class="tab" onclick="openTab(event, 'tab-theodoi')">Theo dõi điều trị</button>
                    <button class="tab" onclick="openTab(event, 'tab-thongke')">Thống kê </button>
                    <button class="tab" onclick="openTab(event, 'tab-tailieu')">Tài liệu khác</button>
                </div>

                <!-- Tab Content - Check list -->
                <div id="tab-checklist" class="tab-content active">
                    <div class="card">
                        <div class="card-header" style="background-color: #f5f5f5; padding: 10px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between;">
                            <span style="font-weight: bold;">Check list hồ sơ bệnh án</span>
                            <div style="display: flex; gap: 5px;">
                                <button class="btn" style="flex: 1;" onclick="generateReport()">Thêm biểu mẫu</button>
                                <button class="btn" style="flex: 1;">Tải xuống</button>
                            </div>
                        </div>
                        <div
                            style="padding: 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                                <!-- Chờ thực hiện -->
                                <div style="display: flex; align-items: center;">
                                    <div
                                        style="width: 10px; height: 10px; border-radius: 50%; background-color: #FFA500; margin-right: 5px;">
                                    </div>
                                    <span style="color: #333;">Chờ thực hiện: <strong>5</strong></span>
                                </div>
                                <!-- Đang thực hiện -->
                                <div style="display: flex; align-items: center;">
                                    <div
                                        style="width: 10px; height: 10px; border-radius: 50%; background-color: #1E90FF; margin-right: 5px;">
                                    </div>
                                    <span style="color: #333;">Đang thực hiện: <strong>3</strong></span>
                                </div>
                                <!-- Hoàn tất -->
                                <div style="display: flex; align-items: center;">
                                    <div
                                        style="width: 10px; height: 10px; border-radius: 50%; background-color: #32CD32; margin-right: 5px;">
                                    </div>
                                    <span style="color: #333;">Hoàn tất: <strong>12</strong></span>
                                </div>
                                <!-- Bỏ qua -->
                                <div style="display: flex; align-items: center;">
                                    <div
                                        style="width: 10px; height: 10px; border-radius: 50%; background-color: #FF6347; margin-right: 5px;">
                                    </div>
                                    <span style="color: #333;">Bỏ qua: <strong>2</strong></span>
                                </div>
                                <!-- Đã ký số -->
                                <div style="display: flex; align-items: center;">
                                    <div
                                        style="width: 10px; height: 10px; border-radius: 50%; background-color: #800080; margin-right: 5px;">
                                    </div>
                                    <span style="color: #333;">Ký số: <strong>8/12</strong></span>
                                </div>
                            </div>
                        </div>
                        <div class="card-body" style="padding: 20px;">
                            <table class="table table-bordered">
                                <thead>
                                    <tr style="background-color: #f8f9fa;">
                                        <th>STT</th>
                                        <th>Tên hồ sơ</th>
                                        <th>Trạng thái</th>
                                        <th>Người tạo</th>
                                        <th>Ngày tạo</th>
                                        <th>Người ký</th>
                                        <th>Ngày ký</th>
                                        <th>Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Danh sách hồ sơ cần hoàn tất theo yêu cầu bộ y tế -->
                                    <tr>
                                        <td>1</td>
                                        <td>Bìa bệnh án</td>
                                        <td><span class="badge badge-success">Hoàn thành</span></td>
                                        <td>BS. Nguyễn Văn A</td>
                                        <td>20/04/2023</td>
                                        <td>BS. Nguyễn Văn A</td>
                                        <td>20/04/2023</td>
                                        <td>
                                            <button class="btn btn-sm btn-info">Xem</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>Thông tin bệnh án</td>
                                        <td><span class="badge badge-warning">Chưa hoàn tất</span></td>
                                        <td>BS. Nguyễn Văn A</td>
                                        <td>20/04/2023</td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td>
                                            <button class="btn btn-sm btn-info">Xem</button>
                                            <button class="btn btn-sm btn-warning">Sửa</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>Tổng kết bệnh án</td>
                                        <td><span class="badge badge-warning">Chưa hoàn tất</span></td>
                                        <td>BS. Nguyễn Văn A</td>
                                        <td>20/04/2023</td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td>
                                            <button class="btn btn-sm btn-info">Xem</button>
                                            <button class="btn btn-sm btn-warning">Sửa</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>4</td>
                                        <td>Phiếu khám bệnh</td>
                                        <td><span class="badge badge-success">Hoàn thành</span></td>
                                        <td>BS. Nguyễn Văn A</td>
                                        <td>20/04/2023</td>
                                        <td>BS. Nguyễn Văn A</td>
                                        <td>20/04/2023</td>
                                        <td>
                                            <button class="btn btn-sm btn-info">Xem</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>5</td>
                                        <td>Phiếu yêu cầu xét nghiệm</td>
                                        <td><span class="badge badge-success">Hoàn thành</span></td>
                                        <td>BS. Nguyễn Văn A</td>
                                        <td>20/04/2023</td>
                                        <td>BS. Nguyễn Văn A</td>
                                        <td>20/04/2023</td>
                                        <td>
                                            <button class="btn btn-sm btn-info">Xem</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>6</td>
                                        <td>Phiếu yêu cầu hình ảnh</td>
                                        <td><span class="badge badge-danger">Chưa tạo</span></td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td>
                                            <button class="btn btn-sm btn-success">Tạo</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>7</td>
                                        <td>Nhật ký điều trị</td>
                                        <td><span class="badge badge-warning">Chưa hoàn tất</span></td>
                                        <td>BS. Nguyễn Văn A</td>
                                        <td>20/04/2023</td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td>
                                            <button class="btn btn-sm btn-info">Xem</button>
                                            <button class="btn btn-sm btn-warning">Sửa</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>8</td>
                                        <td>Đơn thuốc</td>
                                        <td><span class="badge badge-success">Hoàn thành</span></td>
                                        <td>BS. Nguyễn Văn A</td>
                                        <td>20/04/2023</td>
                                        <td>BS. Nguyễn Văn A</td>
                                        <td>20/04/2023</td>
                                        <td>
                                            <button class="btn btn-sm btn-info">Xem</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Tab Content - Bìa bệnh án -->
                <div id="tab-bia" class="tab-content">
                    <div class="card">
                        <div class="card-body" style="padding: 0;">
                            <!-- Biểu mẫu bệnh án điện tử -->
                            <div style="font-family: Arial, sans-serif; padding: 20px; border: 1px solid #000;">
                                <!-- Tiêu đề -->
                                <div style="text-align: center; margin-bottom: 20px;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                        <span>Sở Y tế TP HCM</span>
                                        <span>MS: 01/BV-01</span>
                                    </div>
                                    <h2 style="margin: 10px 0;">BỆNH ÁN NỘI KHOA</h2>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>Bệnh viện: HYST</span>
                                        <span>Số lưu trữ: 124</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>Khoa: <input type="text"
                                                style="width: 150px; border-bottom: 1px solid #ccc !important;" />
                                            Giường: <input type="text"
                                                style="width: 100px; border: 1px solid #ccc;" /></span>
                                        <span>Mã YT: <input type="text"
                                                style="width: 200px; border: 1px solid #ccc;" /></span>
                                    </div>
                                </div>

                                <!-- I. HÀNH CHÍNH -->
                                <div style="margin-bottom: 20px;">
                                    <h3 style="text-align: center; margin-bottom: 10px;">I. HÀNH CHÍNH:</h3>
                                    <table style="width: 100%; border-collapse: collapse;">
                                        <tr>
                                            <td>1. Họ và tên (In hoa): <input type="text"
                                                    style="width: 300px; border: 1px solid #ccc;"
                                                    value="NGUYỄN VĂN A" /></td>
                                            <td>2. Sinh ngày: <input type="text"
                                                    style="width: 120px; border: 1px solid #ccc;" value="01/01/1988" />
                                            </td>
                                            <td>Tuổi: <input type="text"
                                                    style="width: 40px; border: 1px solid #ccc; text-align: center;"
                                                    value="35" /></td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                3. Giới: 1. Nam <input type="radio" name="gender" checked /> 2. Nữ
                                                <input type="radio" name="gender" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>4. Nghề nghiệp: <input type="text"
                                                    style="width: 200px; border: 1px solid #ccc;" value="Công an" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5. Dân tộc: <input type="text"
                                                    style="width: 200px; border: 1px solid #ccc;" value="Kinh" /></td>
                                            <td>6. Ngoại kiều: <input type="text"
                                                    style="width: 200px; border: 1px solid #ccc;" /></td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                7. Địa chỉ: Số nhà <input type="text"
                                                    style="width: 80px; border: 1px solid #ccc;" value="123" /> Thôn,
                                                phường <input type="text" style="width: 120px; border: 1px solid #ccc;"
                                                    value="ABC" />
                                                Xã, phường <input type="text"
                                                    style="width: 120px; border: 1px solid #ccc;" value="1" />
                                                Huyện (Q, Tx) <input type="text"
                                                    style="width: 150px; border: 1px solid #ccc;" value="Quận 1" />
                                                Tỉnh, thành phố <input type="text"
                                                    style="width: 150px; border: 1px solid #ccc;" value="TP.HCM" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>8. Nơi làm việc: <input type="text"
                                                    style="width: 200px; border: 1px solid #ccc;"
                                                    value="Công an TP.HCM" /></td>
                                            <td>9. Đối tượng: 1.BHYT <input type="radio" name="object" checked /> 2.Thu
                                                phí <input type="radio" name="object" /> 3.Miễn <input type="radio"
                                                    name="object" /> 4.Khác <input type="radio" name="object" /></td>
                                        </tr>
                                        <tr>
                                            <td>10. BHYT giá trị đến ngày: <input type="text"
                                                    style="width: 50px; border: 1px solid #ccc;" value="31" /> tháng
                                                <input type="text" style="width: 50px; border: 1px solid #ccc;"
                                                    value="12" /> năm <input type="text"
                                                    style="width: 80px; border: 1px solid #ccc;" value="2023" /></td>
                                            <td>Số thẻ BHYT: <input type="text"
                                                    style="width: 200px; border: 1px solid #ccc;" value="123456789" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                11. Họ tên, địa chỉ người nhà khi cần báo tin: <input type="text"
                                                    style="width: 100%; border: 1px solid #ccc;"
                                                    value="Nguyễn Văn B, 123 Đường ABC, Quận 1, TP.HCM" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                Điện thoại số: <input type="text"
                                                    style="width: 200px; border: 1px solid #ccc;" value="0123456789" />
                                            </td>
                                        </tr>
                                    </table>
                                </div>

                                <!-- II. QUẢN LÝ NGƯỜI BỆNH -->
                                <div style="margin-bottom: 20px;">
                                    <h3 style="text-align: center; margin-bottom: 10px;">II. QUẢN LÝ NGƯỜI BỆNH</h3>
                                    <table style="width: 100%; border-collapse: collapse; border: 1px solid #000;">
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                12. Vào viện: <input type="text"
                                                    style="width: 60px; border: 1px solid #ccc;" /> giờ <input
                                                    type="text" style="width: 60px; border: 1px solid #ccc;" /> phút
                                                ngày <input type="text" style="width: 60px; border: 1px solid #ccc;"
                                                    value="01/04/2023" />
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                14. Nơi giới thiệu: 1.Cơ quan y tế <input type="radio" name="refer"
                                                    checked /> 2.Tự đến <input type="radio" name="refer" /> 3.Khác
                                                <input type="radio" name="refer" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                13. Trực tiếp vào: 1.Cấp cứu <input type="radio"
                                                    name="direct-admission" /> 2.KKB <input type="radio"
                                                    name="direct-admission" checked /> 3.Khoa điều trị <input
                                                    type="radio" name="direct-admission" />
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                - Vào viện do bệnh này lần thứ <input type="text"
                                                    style="width: 40px; border: 1px solid #ccc;" value="1" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                <table style="width: 100%;">
                                                    <tr>
                                                        <td>Khoa</td>
                                                        <td><input type="text"
                                                                style="width: 100%; border: 1px solid #ccc;"
                                                                value="Nội Khoa" /></td>
                                                    </tr>
                                                    <tr>
                                                        <td>15. Vào khoa</td>
                                                        <td>Giờ <input type="text"
                                                                style="width: 40px; border: 1px solid #ccc;" /> phút
                                                            ngày <input type="text"
                                                                style="width: 80px; border: 1px solid #ccc;" /> Số ngày
                                                            ĐTr <input type="text"
                                                                style="width: 40px; border: 1px solid #ccc;" /></td>
                                                    </tr>
                                                    <tr>
                                                        <td>16. Chuyển</td>
                                                        <td>
                                                            <table style="width: 100%;">
                                                                <tr>
                                                                    <td>Khoa</td>
                                                                    <td><input type="text"
                                                                            style="width: 100%; border: 1px solid #ccc;" />
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td></td>
                                                                    <td>Giờ <input type="text"
                                                                            style="width: 40px; border: 1px solid #ccc;" />
                                                                        phút ngày <input type="text"
                                                                            style="width: 80px; border: 1px solid #ccc;" />
                                                                        Số ngày ĐTr <input type="text"
                                                                            style="width: 40px; border: 1px solid #ccc;" />
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td></td>
                                                                    <td>Giờ <input type="text"
                                                                            style="width: 40px; border: 1px solid #ccc;" />
                                                                        phút ngày <input type="text"
                                                                            style="width: 80px; border: 1px solid #ccc;" />
                                                                        Số ngày ĐTr <input type="text"
                                                                            style="width: 40px; border: 1px solid #ccc;" />
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                <table style="width: 100%;">
                                                    <tr>
                                                        <td>17. Chuyển viện: 1.Tuyển lên <input type="radio"
                                                                name="transfer" /> 2.Tuyển xuống <input type="radio"
                                                                name="transfer" /> 3.CK <input type="radio"
                                                                name="transfer" /></td>
                                                    </tr>
                                                    <tr>
                                                        <td>- Chuyển đến: <input type="text"
                                                                style="width: 100%; border: 1px solid #ccc;" /></td>
                                                    </tr>
                                                    <tr>
                                                        <td>- Lý do: <input type="text"
                                                                style="width: 100%; border: 1px solid #ccc;" /></td>
                                                    </tr>
                                                    <tr>
                                                        <td>18. Ra viện: <input type="text"
                                                                style="width: 60px; border: 1px solid #ccc;" /> giờ
                                                            <input type="text"
                                                                style="width: 60px; border: 1px solid #ccc;" /> phút
                                                            ngày <input type="text"
                                                                style="width: 60px; border: 1px solid #ccc;" /></td>
                                                    </tr>
                                                    <tr>
                                                        <td>1. Ra viện <input type="radio" name="discharge" checked />
                                                            2. Xin về <input type="radio" name="discharge" /> 3. Bỏ về
                                                            <input type="radio" name="discharge" /> 4. Đưa về <input
                                                                type="radio" name="discharge" /></td>
                                                    </tr>
                                                    <tr>
                                                        <td>19. Tổng số ngày điều trị: <input type="text"
                                                                style="width: 80px; border: 1px solid #ccc;"
                                                                value="7" /></td>
                                                    </tr>
                                                </table>
                                            </td>
                                        </tr>
                                    </table>
                                </div>

                                <!-- III. CHẨN ĐOÁN -->
                                <div style="margin-bottom: 20px;">
                                    <table style="width: 100%; border-collapse: collapse; border: 1px solid #000;">
                                        <tr>
                                            <th style="border: 1px solid #000; padding: 5px; text-align: center;">III.
                                                CHẨN ĐOÁN</th>
                                            <th style="border: 1px solid #000; padding: 5px; text-align: center;">MÃ
                                            </th>
                                            <th style="border: 1px solid #000; padding: 5px; text-align: center;"></th>
                                            <th style="border: 1px solid #000; padding: 5px; text-align: center;">MÃ
                                            </th>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                20. Nơi chuyển đến: <input type="text"
                                                    style="width: 100%; border: 1px solid #ccc;" />
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                <input type="text"
                                                    style="width: 100%; border: 1px solid #ccc; text-align: center;" />
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                23. Ra viện:
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;"></td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                21. KKB, Cấp cứu: <input type="text"
                                                    style="width: 100%; border: 1px solid #ccc;"
                                                    value="Viêm phổi nhẹ" />
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                <input type="text"
                                                    style="width: 100%; border: 1px solid #ccc; text-align: center;"
                                                    value="J18.9" />
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                + Bệnh chính: <input type="text"
                                                    style="width: 100%; border: 1px solid #ccc;"
                                                    value="Viêm phổi cấp" />
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                <input type="text"
                                                    style="width: 100%; border: 1px solid #ccc; text-align: center;"
                                                    value="J18.1" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                22. Khi vào khoa điều trị: <input type="text"
                                                    style="width: 100%; border: 1px solid #ccc;"
                                                    value="Viêm phổi cấp" />
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                <input type="text"
                                                    style="width: 100%; border: 1px solid #ccc; text-align: center;"
                                                    value="J18.1" />
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                + Bệnh kèm theo: <input type="text"
                                                    style="width: 100%; border: 1px solid #ccc;"
                                                    value="Nhiễm trùng đường hô hấp" />
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                <input type="text"
                                                    style="width: 100%; border: 1px solid #ccc; text-align: center;"
                                                    value="J98.9" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                + Thu thuật <input type="checkbox" style="margin-left: 10px;" /> + Phẫu
                                                thuật <input type="checkbox" style="margin-left: 10px;" />
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;"></td>
                                            <td style="border: 1px solid #000; padding: 5px;">
                                                + Tải biến <input type="checkbox" style="margin-left: 10px;" /> + Biến
                                                chứng <input type="checkbox" style="margin-left: 10px;" />
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;"></td>
                                        </tr>
                                    </table>
                                </div>

                                <!-- IV. TÌNH TRẠNG RA VIỆN -->
                                <div style="margin-bottom: 20px;">
                                    <table style="width: 100%; border-collapse: collapse; border: 1px solid #000;">
                                        <tr>
                                            <th style="border: 1px solid #000; padding: 5px; text-align: center;"
                                                colspan="2">IV. TÌNH TRẠNG RA VIỆN</th>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 5px; width: 50%;">
                                                <table style="width: 100%;">
                                                    <tr>
                                                        <td style="padding: 3px;">
                                                            24. Kết quả điều trị:
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="padding: 3px;">
                                                            1. Khỏi <input type="checkbox" style="margin-left: 10px;"
                                                                checked /> 2. Đỡ giảm <input type="checkbox"
                                                                style="margin-left: 10px;" />
                                                            3. Không thay đổi <input type="checkbox"
                                                                style="margin-left: 10px;" /> 4. Nặng hơn <input
                                                                type="checkbox" style="margin-left: 10px;" />
                                                            5. Tử vong <input type="checkbox"
                                                                style="margin-left: 10px;" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="padding: 3px;">
                                                            25. Giải剖 bệnh (khi có sinh thiết):
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="padding: 3px;">
                                                            1. Lành tính <input type="checkbox"
                                                                style="margin-left: 10px;" /> 2. Nghỉ ngờ <input
                                                                type="checkbox" style="margin-left: 10px;" />
                                                            3. Ác tính <input type="checkbox"
                                                                style="margin-left: 10px;" />
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px; width: 50%;">
                                                <table style="width: 100%;">
                                                    <tr>
                                                        <td style="padding: 3px;">
                                                            26. Tình hình tử vong: Giờ <input type="text"
                                                                style="width: 40px; border: 1px solid #ccc;" /> phút
                                                            ngày <input type="text"
                                                                style="width: 40px; border: 1px solid #ccc;" /> tháng
                                                            <input type="text"
                                                                style="width: 40px; border: 1px solid #ccc;" /> năm
                                                            <input type="text"
                                                                style="width: 60px; border: 1px solid #ccc;" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="padding: 3px;">
                                                            1. Do bệnh <input type="checkbox"
                                                                style="margin-left: 10px;" /> 2.Do tai biến điều trị
                                                            <input type="checkbox" style="margin-left: 10px;" />
                                                            3. Khác <input type="checkbox" style="margin-left: 10px;" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="padding: 3px;">
                                                            1. Trong 24 giờ vào viện <input type="checkbox"
                                                                style="margin-left: 10px;" /> 2.Sau 24 giờ vào viện
                                                            <input type="checkbox" style="margin-left: 10px;" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="padding: 3px;">
                                                            27. Nguyên nhân chính tử vong: <input type="text"
                                                                style="width: 100%; border: 1px solid #ccc;" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="padding: 3px;">
                                                            28. Khám nghiệm tử thi: <input type="checkbox"
                                                                style="margin-left: 10px;" /> 29. Chẩn đoán giải剖 tử
                                                            thi: <input type="text"
                                                                style="width: 100%; border: 1px solid #ccc;" />
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                        </tr>
                                    </table>
                                </div>

                                <!-- Ký tên -->
                                <div style="margin-top: 40px; display: flex; justify-content: space-between;">
                                    <div style="text-align: center; width: 45%;">
                                        <div style="font-weight: bold; margin-bottom: 20px;">Giám đốc bệnh viện</div>
                                        <div style="margin-top: 40px;">Họ và tên: <input type="text"
                                                style="width: 200px; border: 1px solid #ccc;" value="" /></div>
                                    </div>
                                    <div style="text-align: center; width: 45%;">
                                        <div style="font-weight: bold; margin-bottom: 20px;">Trưởng khoa</div>
                                        <div style="margin-top: 40px;">Họ và tên: <input type="text"
                                                style="width: 200px; border: 1px solid #ccc;" value="" /></div>
                                    </div>
                                </div>
                                <div style="text-align: center; margin-top: 20px;">
                                    Ngày: <input type="text" style="width: 40px; border: 1px solid #ccc;" /> tháng:
                                    <input type="text" style="width: 40px; border: 1px solid #ccc;" /> năm: <input
                                        type="text" style="width: 60px; border: 1px solid #ccc;" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Content - Thông tin bệnh án -->
                <div id="tab-thongtin" class="tab-content">
                    <div class="card">
                        <div class="card-body" style="padding: 0;">
                            <!-- Biểu mẫu chi tiết bệnh án -->
                            <div style="font-family: Arial, sans-serif; padding: 20px; border: 1px solid #000;">
                                <h2 style="text-align: center; margin: 10px 0;">A. Bệnh án</h2>

                                <!-- I. Lý do vào viện -->
                                <div style="margin-bottom: 20px;">
                                    <h3>I. Lý do vào viện:</h3>
                                    <input type="text" style="width: 100%; border: 1px solid #ccc; margin-bottom: 10px;"
                                        placeholder="Nhập lý do vào viện" />
                                </div>

                                <!-- II. Hồi bệnh -->
                                <div style="margin-bottom: 20px;">
                                    <h3>II. Hồi bệnh:</h3>

                                    <!-- 1. Quá trình bệnh lý -->
                                    <div style="margin-bottom: 15px;">
                                        <h4>1. Quá trình bệnh lý:</h4>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 100px;"
                                            placeholder="Nhập quá trình bệnh lý (khởi phát, diễn biến, chẩn đoán, điều trị, tác dụng phụ, v.v.)"></textarea>
                                    </div>

                                    <!-- 2. Tiền sử bệnh -->
                                    <div style="margin-bottom: 15px;">
                                        <h4>2. Tiền sử bệnh:</h4>
                                        <p style="margin-bottom: 5px;">+ Bản thân:</p>
                                        <table
                                            style="width: 100%; border-collapse: collapse; border: 1px solid #000; margin-bottom: 10px;">
                                            <tr>
                                                <th style="border: 1px solid #000; padding: 5px;">TT</th>
                                                <th style="border: 1px solid #000; padding: 5px;">Ký hiệu</th>
                                                <th style="border: 1px solid #000; padding: 5px;">Thời gian (tháng theo
                                                    tháng)</th>
                                                <th style="border: 1px solid #000; padding: 5px;">TT</th>
                                                <th style="border: 1px solid #000; padding: 5px;">Ký hiệu</th>
                                                <th style="border: 1px solid #000; padding: 5px;">Thời gian (tháng theo
                                                    tháng)</th>
                                            </tr>
                                            <tr>
                                                <td style="border: 1px solid #000; padding: 5px; text-align: center;">01
                                                </td>
                                                <td style="border: 1px solid #000; padding: 5px;">Dị ứng</td>
                                                <td style="border: 1px solid #000; padding: 5px;"><input type="checkbox"
                                                        style="margin-left: 10px;" /></td>
                                                <td style="border: 1px solid #000; padding: 5px; text-align: center;">04
                                                </td>
                                                <td style="border: 1px solid #000; padding: 5px;">Thuốc lá</td>
                                                <td style="border: 1px solid #000; padding: 5px;"><input type="checkbox"
                                                        style="margin-left: 10px;" /></td>
                                            </tr>
                                            <tr>
                                                <td style="border: 1px solid #000; padding: 5px; text-align: center;">02
                                                </td>
                                                <td style="border: 1px solid #000; padding: 5px;">Ma tuý</td>
                                                <td style="border: 1px solid #000; padding: 5px;"><input type="checkbox"
                                                        style="margin-left: 10px;" /></td>
                                                <td style="border: 1px solid #000; padding: 5px; text-align: center;">05
                                                </td>
                                                <td style="border: 1px solid #000; padding: 5px;">Thuốc lào</td>
                                                <td style="border: 1px solid #000; padding: 5px;"><input type="checkbox"
                                                        style="margin-left: 10px;" /></td>
                                            </tr>
                                            <tr>
                                                <td style="border: 1px solid #000; padding: 5px; text-align: center;">03
                                                </td>
                                                <td style="border: 1px solid #000; padding: 5px;">Rượu bia</td>
                                                <td style="border: 1px solid #000; padding: 5px;"><input type="checkbox"
                                                        style="margin-left: 10px;" /></td>
                                                <td style="border: 1px solid #000; padding: 5px; text-align: center;">06
                                                </td>
                                                <td style="border: 1px solid #000; padding: 5px;">Khác</td>
                                                <td style="border: 1px solid #000; padding: 5px;"><input type="checkbox"
                                                        style="margin-left: 10px;" /></td>
                                            </tr>
                                        </table>

                                        <p style="margin-bottom: 5px;">+ Gia đình:</p>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 50px;"
                                            placeholder="Nhập tiền sử bệnh gia đình"></textarea>
                                    </div>
                                </div>

                                <!-- III. Khám bệnh -->
                                <div style="margin-bottom: 20px;">
                                    <h3>III. Khám bệnh:</h3>

                                    <!-- 1. Toàn thân -->
                                    <div style="margin-bottom: 15px;">
                                        <h4>1. Toàn thân:</h4>
                                        <div style="display: flex; justify-content: space-between;">
                                            <div style="width: 70%;">
                                                <p>(tỷ thức, daniem mạc, hệ thống hạch, ....)</p>
                                                <textarea style="width: 100%; border: 1px solid #ccc; min-height: 60px;"
                                                    placeholder="Nhập thông tin toàn thân"></textarea>
                                            </div>
                                            <div style="width: 28%;">
                                                <table
                                                    style="width: 100%; border-collapse: collapse; border: 1px solid #000;">
                                                    <tr>
                                                        <td style="border: 1px solid #000; padding: 5px;">Mạch</td>
                                                        <td style="border: 1px solid #000; padding: 5px;"><input
                                                                type="text" style="width: 100%; border: 1px solid #ccc;"
                                                                placeholder="lần/ph" /></td>
                                                    </tr>
                                                    <tr>
                                                        <td style="border: 1px solid #000; padding: 5px;">Nhiệt độ</td>
                                                        <td style="border: 1px solid #000; padding: 5px;"><input
                                                                type="text" style="width: 100%; border: 1px solid #ccc;"
                                                                placeholder="°C" /></td>
                                                    </tr>
                                                    <tr>
                                                        <td style="border: 1px solid #000; padding: 5px;">Huyết áp</td>
                                                        <td style="border: 1px solid #000; padding: 5px;"><input
                                                                type="text" style="width: 100%; border: 1px solid #ccc;"
                                                                placeholder="/ mmHg" /></td>
                                                    </tr>
                                                    <tr>
                                                        <td style="border: 1px solid #000; padding: 5px;">Nhịp thở</td>
                                                        <td style="border: 1px solid #000; padding: 5px;"><input
                                                                type="text" style="width: 100%; border: 1px solid #ccc;"
                                                                placeholder="lần/ph" /></td>
                                                    </tr>
                                                    <tr>
                                                        <td style="border: 1px solid #000; padding: 5px;">Cân nặng</td>
                                                        <td style="border: 1px solid #000; padding: 5px;"><input
                                                                type="text" style="width: 100%; border: 1px solid #ccc;"
                                                                placeholder="kg" /></td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 2. Triệu chứng cơ năng -->
                                    <div style="margin-bottom: 15px;">
                                        <h4>2. Triệu chứng cơ năng:</h4>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 60px;"
                                            placeholder="Nhập triệu chứng cơ năng"></textarea>
                                    </div>

                                    <!-- 3. Thường tổn cơ bản -->
                                    <div style="margin-bottom: 15px;">
                                        <h4>3. Thường tổn cơ bản:</h4>
                                        <p>(sơ phát, thứ phát, tính chất, loại phân bố, kích thước, hình dạng, màu sắc
                                            v.v.)</p>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 120px;"
                                            placeholder="Nhập thông tin thường tổn cơ bản"></textarea>
                                    </div>

                                    <!-- 4. Các cơ quan -->
                                    <div style="margin-bottom: 15px;">
                                        <h4>4. Các cơ quan:</h4>

                                        <p>+ Tuần hoàn:</p>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 40px;"
                                            placeholder="Nhập tình trạng tuần hoàn"></textarea>

                                        <p>+ Hô hấp:</p>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 40px;"
                                            placeholder="Nhập tình trạng hô hấp"></textarea>

                                        <p>+ Tiêu hóa:</p>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 40px;"
                                            placeholder="Nhập tình trạng tiêu hóa"></textarea>

                                        <p>+ Thận - Tiết niệu - Sinh dục:</p>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 40px;"
                                            placeholder="Nhập tình trạng thận, tiết niệu, sinh dục"></textarea>

                                        <p>+ Thần kinh ngoại biên:</p>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 40px;"
                                            placeholder="Nhập tình trạng thần kinh ngoại biên"></textarea>

                                        <p>+ Các cơ quan khác:</p>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 40px;"
                                            placeholder="Nhập tình trạng các cơ quan khác"></textarea>
                                    </div>

                                    <!-- 5. Các xét nghiệm cần làm sàng cần làm -->
                                    <div style="margin-bottom: 15px;">
                                        <h4>5. Các xét nghiệm cần làm sàng cần làm:</h4>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 80px;"
                                            placeholder="Nhập thông tin xét nghiệm cần làm"></textarea>
                                    </div>

                                    <!-- 6. Tóm tắt bệnh án -->
                                    <div style="margin-bottom: 15px;">
                                        <h4>6. Tóm tắt bệnh án:</h4>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 100px;"
                                            placeholder="Nhập tóm tắt bệnh án"></textarea>
                                    </div>
                                </div>

                                <!-- IV. Chẩn đoán khi vào khoa điều trị -->
                                <div style="margin-bottom: 20px;">
                                    <h3>IV. Chẩn đoán khi vào khoa điều trị:</h3>
                                    <div style="margin-bottom: 15px;">
                                        <p style="margin-bottom: 5px;">+ Bệnh chính: </p>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 40px;"
                                            placeholder="Nhập bệnh chính..."></textarea>
                                    </div>
                                    <div style="margin-bottom: 15px;">
                                        <p style="margin-bottom: 5px;">+ Bệnh kèm theo (nếu có): </p>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 40px;"
                                            placeholder="Nhập bệnh kèm theo..."></textarea>
                                    </div>
                                    <div style="margin-bottom: 15px;">
                                        <p style="margin-bottom: 5px;">+ Phân biệt: </p>
                                        <textarea style="width: 100%; border: 1px solid #ccc; min-height: 40px;"
                                            placeholder="Nhập bệnh phân biệt..."></textarea>
                                    </div>
                                </div>

                                <!-- V. Tiên lượng -->
                                <div style="margin-bottom: 20px;">
                                    <h3>V. Tiên lượng:</h3>
                                    <textarea style="width: 100%; border: 1px solid #ccc; min-height: 80px;"
                                        placeholder="Nhập tiên lượng bệnh tình..."></textarea>
                                </div>

                                <!-- VI. Hướng điều trị -->
                                <div style="margin-bottom: 20px;">
                                    <h3>VI. Hướng điều trị:</h3>
                                    <textarea style="width: 100%; border: 1px solid #ccc; min-height: 120px;"
                                        placeholder="Nhập hướng điều trị..."></textarea>
                                </div>

                                <!-- Phần chữ ký bác sỹ -->
                                <div style="margin-top: 40px;">
                                    <div style="display: flex; justify-content: flex-end;">
                                        <div style="width: 50%;">
                                            <div style="margin-bottom: 15px;">
                                                <p>Ngày...tháng...năm...</p>
                                                <div style="border-bottom: 1px solid #000; height: 20px;"></div>
                                            </div>
                                            <div style="margin-bottom: 15px;">
                                                <p>Bác sỹ làm bệnh án</p>
                                                <div style="border-bottom: 1px solid #000; height: 20px;"></div>
                                            </div>
                                            <div>
                                                <p>Họ và tên...</p>
                                                <div style="border-bottom: 1px solid #000; height: 20px;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Content - Tổng kết Bệnh án -->
                <div id="tab-tongket" class="tab-content">
                    <div class="card">
                        <div class="card-body" style="padding: 0;">
                            <!-- Biểu mẫu tổng kết bệnh án -->
                            <div style="font-family: Arial, sans-serif; padding: 20px; border: 1px solid #000;">
                                <h2 style="text-align: center; margin: 10px 0;">B. Tổng kết bệnh án</h2>

                                <table
                                    style="width: 100%; border: 1px solid #000; border-collapse: collapse; margin-bottom: 20px;">
                                    <tr>
                                        <td style="border: 1px solid #000; padding: 8px;">
                                            <h3 style="margin-top: 0;">1. Quá trình bệnh lý và diễn biến làm sàng:</h3>
                                            <textarea
                                                style="width: 100%; border: 1px solid #ccc; min-height: 150px; resize: vertical;"
                                                placeholder="Nhập quá trình bệnh lý và diễn biến làm sàng..."></textarea>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid #000; padding: 8px;">
                                            <h3 style="margin-top: 0;">2. Tóm tắt kết quả xét nghiệm cần làm sàng có giá
                                                trị chẩn đoán:</h3>
                                            <textarea
                                                style="width: 100%; border: 1px solid #ccc; min-height: 100px; resize: vertical;"
                                                placeholder="Nhập tóm tắt kết quả xét nghiệm..."></textarea>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid #000; padding: 8px;">
                                            <h3 style="margin-top: 0;">3. Phương pháp điều trị:</h3>
                                            <textarea
                                                style="width: 100%; border: 1px solid #ccc; min-height: 100px; resize: vertical;"
                                                placeholder="Nhập phương pháp điều trị..."></textarea>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid #000; padding: 8px;">
                                            <h3 style="margin-top: 0;">4. Tình trạng người bệnh ra viện:</h3>
                                            <textarea
                                                style="width: 100%; border: 1px solid #ccc; min-height: 100px; resize: vertical;"
                                                placeholder="Nhập tình trạng người bệnh ra viện..."></textarea>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid #000; padding: 8px;">
                                            <h3 style="margin-top: 0;">5. Hướng điều trị và các chế độ tiếp theo:</h3>
                                            <textarea
                                                style="width: 100%; border: 1px solid #ccc; min-height: 100px; resize: vertical;"
                                                placeholder="Nhập hướng điều trị và các chế độ tiếp theo..."></textarea>
                                        </td>
                                    </tr>
                                </table>

                                <!-- Bảng hồ sơ, phim, ảnh -->
                                <table style="width: 100%; border: 1px solid #000; border-collapse: collapse;">
                                    <tr>
                                        <td style="border: 1px solid #000; padding: 8px; text-align: center;"
                                            colspan="2">Hồ sơ, phim, ảnh</td>
                                        <td style="border: 1px solid #000; padding: 8px; text-align: center;">Người giao
                                            hồ sơ</td>
                                        <td style="border: 1px solid #000; padding: 8px; text-align: center;"
                                            rowspan="3">Ngày ... tháng ... năm ......<br><br>Bác sỹ điều trị</td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid #000; padding: 5px; text-align: center;">Loại</td>
                                        <td style="border: 1px solid #000; padding: 5px; text-align: center;">Số tờ</td>
                                        <td style="border: 1px solid #000; padding: 5px; text-align: center;"></td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid #000; padding: 5px;">- X-quang</td>
                                        <td style="border: 1px solid #000; padding: 5px;"><input type="text"
                                                style="width: 100%; border: 1px solid #ccc; text-align: center;" /></td>
                                        <td style="border: 1px solid #000; padding: 5px;">
                                            <div>Người nhận hồ sơ:</div>
                                            <div>Họ tên: <input type="text"
                                                    style="width: 100%; border: 1px solid #ccc;" /></div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid #000; padding: 5px;">- CT Scanner</td>
                                        <td style="border: 1px solid #000; padding: 5px;"><input type="text"
                                                style="width: 100%; border: 1px solid #ccc; text-align: center;" /></td>
                                        <td style="border: 1px solid #000; padding: 5px;">Họ tên: <input type="text"
                                                style="width: 100%; border: 1px solid #ccc;" /></td>
                                        <td style="border: 1px solid #000; padding: 5px;">Họ tên: <input type="text"
                                                style="width: 100%; border: 1px solid #ccc;" /></td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid #000; padding: 5px;">- Siêu âm</td>
                                        <td style="border: 1px solid #000; padding: 5px;"><input type="text"
                                                style="width: 100%; border: 1px solid #ccc; text-align: center;" /></td>
                                        <td style="border: 1px solid #000; padding: 5px;"></td>
                                        <td style="border: 1px solid #000; padding: 5px;"></td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid #000; padding: 5px;">- Xét nghiệm</td>
                                        <td style="border: 1px solid #000; padding: 5px;"><input type="text"
                                                style="width: 100%; border: 1px solid #ccc; text-align: center;" /></td>
                                        <td style="border: 1px solid #000; padding: 5px;"></td>
                                        <td style="border: 1px solid #000; padding: 5px;"></td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid #000; padding: 5px;">- Khác: <input type="text"
                                                style="width: 60%; border: 1px solid #ccc;" /></td>
                                        <td style="border: 1px solid #000; padding: 5px;"><input type="text"
                                                style="width: 100%; border: 1px solid #ccc; text-align: center;" /></td>
                                        <td style="border: 1px solid #000; padding: 5px;"></td>
                                        <td style="border: 1px solid #000; padding: 5px;"></td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid #000; padding: 5px;">- Toàn bộ hồ sơ</td>
                                        <td style="border: 1px solid #000; padding: 5px;"><input type="text"
                                                style="width: 100%; border: 1px solid #ccc; text-align: center;" /></td>
                                        <td style="border: 1px solid #000; padding: 5px;">Họ tên: <input type="text"
                                                style="width: 100%; border: 1px solid #ccc;" /></td>
                                        <td style="border: 1px solid #000; padding: 5px;"></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Content - Phiếu theo dõi điều trị -->
                <div id="tab-theodoi" class="tab-content">
                    <div class="card">
                        <div class="card-body" style="padding: 0;">
                            <!-- Biểu mẫu phiếu theo dõi điều trị -->
                            <div style="font-family: Arial, sans-serif; padding: 20px; border: 1px solid #000;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                                    <div>
                                        <p>Cơ sở KB, CB: <input type="text"
                                                style="width: 200px; border: 1px solid #ccc;" /></p>
                                        <p>Khoa: <input type="text" style="width: 200px; border: 1px solid #ccc;" /></p>
                                    </div>
                                    <div style="text-align: center;">
                                        <h2 style="margin: 0;">PHIẾU THEO DÕI ĐIỀU TRỊ</h2>
                                        <p>Tờ số: <input type="text" style="width: 100px; border: 1px solid #ccc;" />
                                        </p>
                                    </div>
                                    <div>
                                        <p>Mã số: <input type="text" style="width: 150px; border: 1px solid #ccc;" />
                                        </p>
                                        <p>Số vào viện: <input type="text"
                                                style="width: 150px; border: 1px solid #ccc;" /></p>
                                        <p>Mã người bệnh: <input type="text"
                                                style="width: 150px; border: 1px solid #ccc;" /></p>
                                    </div>
                                </div>

                                <div style="margin-bottom: 15px;">
                                    <p>Họ và tên người bệnh: <input type="text"
                                            style="width: 500px; border: 1px solid #ccc;" /> Tuổi: <input type="text"
                                            style="width: 80px; border: 1px solid #ccc;" />
                                        <input type="checkbox" id="male" /> <label for="male">Nam</label>
                                        <input type="checkbox" id="female" /> <label for="female">Nữ</label>
                                    </p>
                                </div>

                                <div style="margin-bottom: 15px;">
                                    <p>Khoa: <input type="text" style="width: 200px; border: 1px solid #ccc;" /> Phòng:
                                        <input type="text" style="width: 100px; border: 1px solid #ccc;" /> Giường:
                                        <input type="text" style="width: 80px; border: 1px solid #ccc;" /></p>
                                </div>

                                <div style="margin-bottom: 15px;">
                                    <p>Chẩn đoán: <input type="text" style="width: 100%; border: 1px solid #ccc;" /></p>
                                </div>

                                <div style="margin-bottom: 20px;">
                                    <p>Chẩn đoán phân biệt:</p>
                                    <textarea
                                        style="width: 100%; border: 1px solid #ccc; min-height: 60px; resize: vertical;"></textarea>
                                </div>

                                <!-- Bảng theo dõi điều trị -->
                                <table
                                    style="width: 100%; border: 1px solid #000; border-collapse: collapse; margin-bottom: 20px;">
                                    <thead>
                                        <tr>
                                            <th style="border: 1px solid #000; padding: 8px;">Thời gian (Ngày, giờ)</th>
                                            <th style="border: 1px solid #000; padding: 8px; width: 50%;">Diễn biến bệnh
                                                (Viết diễn biến theo cấu trúc như SOAP)</th>
                                            <th style="border: 1px solid #000; padding: 8px;">Chỉ định</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Hàng nhập liệu -->
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 5px;"><input type="text"
                                                    style="width: 100%; border: 1px solid #ccc;" /></td>
                                            <td style="border: 1px solid #000; padding: 5px;"><textarea
                                                    style="width: 100%; border: 1px solid #ccc; min-height: 100px; resize: vertical;"></textarea>
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;"><textarea
                                                    style="width: 100%; border: 1px solid #ccc; min-height: 100px; resize: vertical;"></textarea>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 5px;"><input type="text"
                                                    style="width: 100%; border: 1px solid #ccc;" /></td>
                                            <td style="border: 1px solid #000; padding: 5px;"><textarea
                                                    style="width: 100%; border: 1px solid #ccc; min-height: 100px; resize: vertical;"></textarea>
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;"><textarea
                                                    style="width: 100%; border: 1px solid #ccc; min-height: 100px; resize: vertical;"></textarea>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 5px;"><input type="text"
                                                    style="width: 100%; border: 1px solid #ccc;" /></td>
                                            <td style="border: 1px solid #000; padding: 5px;"><textarea
                                                    style="width: 100%; border: 1px solid #ccc; min-height: 100px; resize: vertical;"></textarea>
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;"><textarea
                                                    style="width: 100%; border: 1px solid #ccc; min-height: 100px; resize: vertical;"></textarea>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 5px;"><input type="text"
                                                    style="width: 100%; border: 1px solid #ccc;" /></td>
                                            <td style="border: 1px solid #000; padding: 5px;"><textarea
                                                    style="width: 100%; border: 1px solid #ccc; min-height: 100px; resize: vertical;"></textarea>
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;"><textarea
                                                    style="width: 100%; border: 1px solid #ccc; min-height: 100px; resize: vertical;"></textarea>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 5px;"><input type="text"
                                                    style="width: 100%; border: 1px solid #ccc;" /></td>
                                            <td style="border: 1px solid #000; padding: 5px;"><textarea
                                                    style="width: 100%; border: 1px solid #ccc; min-height: 100px; resize: vertical;"></textarea>
                                            </td>
                                            <td style="border: 1px solid #000; padding: 5px;"><textarea
                                                    style="width: 100%; border: 1px solid #ccc; min-height: 100px; resize: vertical;"></textarea>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                                <p style="font-weight: bold; margin-bottom: 30px;">Ghi chú: Bác sĩ ký ngay sau mỗi lần
                                    ghi chép trong phần "Diễn biến bệnh" hoặc "Chỉ định".</p>

                                <hr style="border: 3px solid #000; margin: 30px 0;" />

                                <!-- Hướng dẫn SOAP -->
                                <div style="margin-top: 40px;">
                                    <h3 style="text-align: center; margin-bottom: 20px;">Hướng dẫn cách ghi chép theo
                                        cấu trúc (SOAP)</h3>
                                    <ul style="line-height: 1.6;">
                                        <li><strong>- S (Hỏi bệnh):</strong> ghi lại các thông tin của người bệnh tự
                                            khai như triệu chứng, bệnh sử, bối cảnh xuất hiện bệnh, tiến triển...</li>
                                        <li><strong>- O (Kết quả khám):</strong> ghi lại các thông tin do bác sĩ thăm
                                            khám như các dấu hiệu sinh tồn, các kết quả xét nghiệm...</li>
                                        <li><strong>- A (Đánh giá):</strong> Đánh giá, phân tích kết quả và chẩn đoán
                                            trên cơ sở thông tin tự khai của người bệnh và kết quả khám bệnh.</li>
                                        <li><strong>- P (Kế hoạch điều trị):</strong> tóm tắt tình hình, diễn biến bệnh,
                                            đưa ra nhận định, đưa ra hướng xử trị tiếp theo.</li>
                                        <li><strong>- Chỉ định:</strong> cụ thể hóa kế hoạch điều trị như các vấn đề cần
                                            theo dõi (theo dõi thân nhiệt, nhịp thở, huyết áp...), các loại thuốc sử
                                            dụng, các thủ thuật cần làm...</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Content - Hồ sơ/Tài liệu khác -->
                <div id="tab-tailieu" class="tab-content">
                    <div class="card">
                        <div class="card-header"
                            style="background-color: #f5f5f5; padding: 10px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between;">
                            <span style="font-weight: bold;">Hồ sơ/Tài liệu khác</span>
                            <button class="btn btn-small" onclick="toggleDocumentEdit()">Thêm tài liệu</button>
                        </div>
                        <div class="card-body">
                            <!-- Form upload tài liệu -->
                            <div id="documentUploadForm"
                                style="display: none; margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 5px; background-color: #f9f9f9;">
                                <h4>Thêm mới tài liệu</h4>
                                <div class="form-row" style="margin-bottom: 10px;">
                                    <div class="form-group" style="margin-bottom: 10px;">
                                        <label for="documentName">Tên tài liệu:</label>
                                        <input type="text" id="documentName"
                                            style="width: 100%; padding: 8px; border: 1px solid #ccc;">
                                    </div>
                                    <div class="form-group" style="margin-bottom: 10px;">
                                        <label for="documentFile">Chọn file:</label>
                                        <input type="file" id="documentFile" style="width: 100%; padding: 8px;">
                                    </div>
                                    <div class="form-group" style="margin-bottom: 10px;">
                                        <label for="documentType">Loại tài liệu:</label>
                                        <select id="documentType"
                                            style="width: 100%; padding: 8px; border: 1px solid #ccc;">
                                            <option value="report">Báo cáo y tế</option>
                                            <option value="image">Ảnh chụp</option>
                                            <option value="scan">Tài liệu quét</option>
                                            <option value="other">Khác</option>
                                        </select>
                                    </div>
                                    <div class="form-actions" style="text-align: right;">
                                        <button class="btn" onclick="saveDocument()">Lưu</button>
                                        <button class="btn btn-secondary" onclick="cancelDocumentUpload()">Hủy</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Danh sách tài liệu -->
                            <div class="table-responsive">
                                <table style="width: 100%; border: 1px solid #000; border-collapse: collapse;">
                                    <thead>
                                        <tr>
                                            <th style="border: 1px solid #000; padding: 8px; text-align: center;">STT
                                            </th>
                                            <th style="border: 1px solid #000; padding: 8px; text-align: center;">Ngày
                                                tạo</th>
                                            <th style="border: 1px solid #000; padding: 8px; text-align: center;">Mã số
                                            </th>
                                            <th style="border: 1px solid #000; padding: 8px; text-align: center;">Tên
                                                tài liệu</th>
                                            <th style="border: 1px solid #000; padding: 8px; text-align: center;">Trạng
                                                thái ký số</th>
                                            <th style="border: 1px solid #000; padding: 8px; text-align: center;">Thao
                                                tác</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Dữ liệu mẫu -->
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">1</td>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">
                                                2023-05-10</td>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">TL001
                                            </td>
                                            <td style="border: 1px solid #000; padding: 8px;">Báo cáo xét nghiệm máu
                                            </td>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">
                                                <span style="color: green; font-weight: bold;">Đã ký</span>
                                            </td>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">
                                                <button class="btn btn-small">Xem</button>
                                                <button class="btn btn-small btn-danger">Xóa</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">2</td>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">
                                                2023-05-12</td>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">TL002
                                            </td>
                                            <td style="border: 1px solid #000; padding: 8px;">Hình ảnh X-quang ngực</td>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">
                                                <span style="color: red;">Chưa ký</span>
                                            </td>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">
                                                <button class="btn btn-small">Xem</button>
                                                <button class="btn btn-small btn-danger">Xóa</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">3</td>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">
                                                2023-05-15</td>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">TL003
                                            </td>
                                            <td style="border: 1px solid #000; padding: 8px;">Hợp đồng y tế</td>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">
                                                <span style="color: green; font-weight: bold;">Đã ký</span>
                                            </td>
                                            <td style="border: 1px solid #000; padding: 8px; text-align: center;">
                                                <button class="btn btn-small">Xem</button>
                                                <button class="btn btn-small btn-danger">Xóa</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Content - Thống kê -->
                <div id="tab-thongke" class="tab-content">


                    <!-- Hoá chất 2 -->
                    <div class="card" style="border-left: 4px solid #6610f2;">
                        <div class="card-body">
                            <h5 class="card-title">Dịch vụ</h5>
                            
                                <!-- Chứng từ DV001 -->
                                <div class="mt-3 p-2 border rounded">
                                    <h5>Số chứng từ: DV001</h5>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>Mã</th>
                                                <th>Tên</th>
                                                <th>Đơn vị tính</th>
                                                <th>Đơn giá</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>DV00101</td>
                                                <td>Khám chuyên khoa Nội</td>
                                                <td>lần</td>
                                                <td>150,000</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>DV00102</td>
                                                <td>Xét nghiệm máu thường</td>
                                                <td>lần</td>
                                                <td>80,000</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Chứng từ DV002 -->
                                <div class="mt-3 p-2 border rounded">
                                    <h5>Số chứng từ: DV002</h5>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>Mã</th>
                                                <th>Tên</th>
                                                <th>Đơn vị tính</th>
                                                <th>Đơn giá</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>DV00201</td>
                                                <td>Siêu âm bụng</td>
                                                <td>lần</td>
                                                <td>200,000</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                        </div>
                    </div>

                    <!-- Thuốc -->
                    <div class="card" style="border-left: 4px solid #28a745;">
                        <div class="card-body">
                            <h5 class="card-title">Thuốc</h5>
                            
                                <!-- Chứng từ T001 -->
                                <div class="mt-3 p-2 border rounded">
                                    <h5>Số chứng từ: T001</h5>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>Mã</th>
                                                <th>Tên</th>
                                                <th>Đơn vị tính</th>
                                                <th>Đơn giá</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>T00101</td>
                                                <td>Paracetamol 500mg</td>
                                                <td>Viên</td>
                                                <td>1,500</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>T00102</td>
                                                <td>Amoxicillin 500mg</td>
                                                <td>Viên</td>
                                                <td>3,000</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                        </div>
                    </div>
                    
                    <!-- Vật tư -->
                    <div class="card" style="border-left: 4px solid #ffc107;">
                        <div class="card-body">
                            <h5 class="card-title">Vật tư</h5>
                            
                                <!-- Chứng từ VT001 -->
                                <div class="mt-3 p-2 border rounded">
                                    <h5>Số chứng từ: VT001</h5>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>Mã</th>
                                                <th>Tên</th>
                                                <th>Đơn vị tính</th>
                                                <th>Đơn giá</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>VT00101</td>
                                                <td>Khẩu trang y tế</td>
                                                <td>Cái</td>
                                                <td>5,000</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>VT00102</td>
                                                <td>Găng tay y tế</td>
                                                <td>Cặp</td>
                                                <td>10,000</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                        </div>
                    </div>
                    
                    <!-- Hoá chất -->
                    <div class="card" style="border-left: 4px solid #dc3545;">
                        <div class="card-body">
                            <h5 class="card-title">Hoá chất</h5>
                            
                                <!-- Chứng từ HC001 -->
                                <div class="mt-3 p-2 border rounded">
                                    <h5>Số chứng từ: HC001</h5>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>Mã</th>
                                                <th>Tên</th>
                                                <th>Đơn vị tính</th>
                                                <th>Đơn giá</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>HC00101</td>
                                                <td>Đơn vị H2SO4 0.1N</td>
                                                <td>Chai</td>
                                                <td>150,000</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                        </div>
                    </div>
                    
                    <!-- Máu và chế phẩm máu -->
                    <div class="card" style="border-left: 4px solid #6c757d;">
                        <div class="card-body">
                            <h5 class="card-title">Máu và chế phẩm máu</h5>
                            
                                <!-- Chứng từ MM001 -->
                                <div class="mt-3 p-2 border rounded">
                                    <h5>Số chứng từ: MM001</h5>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>Mã</th>
                                                <th>Tên</th>
                                                <th>Đơn vị tính</th>
                                                <th>Đơn giá</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>MM00101</td>
                                                <td>Máu toàn A+</td>
                                                <td>Ống</td>
                                                <td>500,000</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                        </div>
                    </div>
                    
                    <!-- Giường -->
                    <div class="card" style="border-left: 4px solid #17a2b8;">
                        <div class="card-body">
                            <h5 class="card-title">Giường</h5>
                            
                                <!-- Chứng từ G001 -->
                                <div class="mt-3 p-2 border rounded">
                                    <h5>Số chứng từ: G001</h5>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>Mã</th>
                                                <th>Tên</th>
                                                <th>Đơn vị tính</th>
                                                <th>Đơn giá</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>G00101</td>
                                                <td>Giường phòng thường</td>
                                                <td>Ngày</td>
                                                <td>200,000</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                        </div>
                    </div>
                    
                    <!-- Vắc xin -->
                    <div class="card" style="border-left: 4px solid #e83e8c;">
                        <div class="card-body">
                            <h5 class="card-title">Vắc xin</h5>
                            
                                <!-- Chứng từ VC001 -->
                                <div class="mt-3 p-2 border rounded">
                                    <h5>Số chứng từ: VC001</h5>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>Mã</th>
                                                <th>Tên</th>
                                                <th>Đơn vị tính</th>
                                                <th>Đơn giá</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>VC00101</td>
                                                <td>Vắc xin Covid-19</td>
                                                <td>Mũi</td>
                                                <td>50,000</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                        </div>
                    </div>

                    <!-- Hoá chất 2 -->
                    <div class="card" style="border-left: 4px solid #6610f2;">
                        <div class="card-body">
                            <h5 class="card-title">Hoá chất</h5>
                            <div class="mt-3 p-2 border rounded">
                                <h5>Số chứng từ: HC002</h5>
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th>STT</th>
                                            <th>Mã</th>
                                            <th>Tên</th>
                                            <th>Đơn vị tính</th>
                                            <th>Đơn giá</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>HC00201</td>
                                            <td>NaCl 0.9%</td>
                                            <td>Chai</td>
                                            <td>20,000</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Xuất ăn -->
                    <div class="card" style="border-left: 4px solid #fd7e14;">
                        <div class="card-body">
                            <h5 class="card-title">Xuất ăn</h5>
                            <div class="mt-3 p-2 border rounded">
                                <h5>Số chứng từ: HC002</h5>
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th>STT</th>
                                            <th>Mã</th>
                                            <th>Tên</th>
                                            <th>Đơn vị tính</th>
                                            <th>Đơn giá</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>HC00201</td>
                                            <td>NaCl 0.9%</td>
                                            <td>Chai</td>
                                            <td>20,000</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Chế phẩm dinh dưỡng -->
                    <div class="card" style="border-left: 4px solid #20c997;">
                        <div class="card-body">
                            <h5 class="card-title">Chế phẩm dinh dưỡng</h5>
                            <div class="mt-3 p-2 border rounded">
                                    <h5>Số chứng từ: HC004</h5>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>Mã</th>
                                                <th>Tên</th>
                                                <th>Đơn vị tính</th>
                                                <th>Đơn giá</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>HC00401</td>
                                                <td>Chế phẩm dinh dưỡng</td>
                                                <td>Chai</td>
                                                <td>20,000</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="sidebar-right" style="width: 300px; border-left: 1px solid #dee2e6; background-color: #f8f9fa; display: flex; flex-direction: column; height: 100%;">
            <!-- 聊天标题 -->
            <div style="padding: 16px; border-bottom: 1px solid #dee2e6; background-color: #e9ecef; font-weight: 600; color: #495057;">
                Trao đổi nội bộ
            </div>
            
            <!-- 聊天历史区域 -->
            <div id="chatHistory" style="flex-grow: 1; padding: 15px; overflow-y: auto; background-color: #fff;">
                <!-- 欢迎消息 -->
                <div style="text-align: center; margin-bottom: 15px; color: #6c757d; font-style: italic;">
                    Bắt đầu trao đổi về bệnh nhân này
                </div>
            </div>
            
            <!-- 输入区域 -->
            <div style="padding: 15px; border-top: 1px solid #dee2e6; background-color: #f8f9fa;">
                <textarea id="chatInput" rows="3" style="width: 100%; padding: 8px; border: 1px solid #ced4da; border-radius: 4px; margin-bottom: 10px; resize: none;" placeholder="Nhập nội dung trao đổi..."></textarea>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div style="display: flex; gap: 10px;">
                        <button type="button" onclick="uploadAttachment()" style="padding: 6px 12px; background-color: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            <i class="fa fa-paperclip"></i> Tài liệu
                        </button>
                        <input type="file" id="attachmentInput" style="display: none;" />
                    </div>
                    <button type="button" onclick="sendChatMessage()" style="padding: 8px 16px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
                        Gửi
                    </button>
                </div>
            </div>
        </div>
        
        <script>
        // 模拟当前用户信息
        const currentUser = {
            name: "Bác sĩ Bảo",
            role: "Bác sĩ điều trị"
        };
        
        // 模拟其他用户列表
        const otherUsers = [
            { name: "Bác sĩ Minh", role: "Chuyên gia nội tiết" },
            { name: "Y tá Ngọc", role: "Y tá phòng 302" },
            { name: "Bác sĩ Hồng", role: "Chuyên gia tim mạch" }
        ];
        
        // 发送聊天消息
        function sendChatMessage() {
            const chatInput = document.getElementById('chatInput');
            const chatHistory = document.getElementById('chatHistory');
            const message = chatInput.value.trim();
            
            if (message) {
                // 获取当前时间
                const now = new Date();
                const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                                  now.getMinutes().toString().padStart(2, '0');
                
                // 创建消息元素
                const messageElement = document.createElement('div');
                messageElement.style.marginBottom = '15px';
                
                messageElement.innerHTML = `
                    <div style="display: flex; justify-content: flex-end; margin-bottom: 3px;">
                        <div style="font-size: 12px; color: #6c757d; font-weight: 500; margin-right: 8px;">${currentUser.name} (${currentUser.role})</div>
                    </div>
                    <div style="display: flex; justify-content: flex-end;">
                        <div style="max-width: 70%; background-color: #007bff; color: white; padding: 10px; border-radius: 12px 12px 0 12px; position: relative;">
                            <div style="word-wrap: break-word;">${message}</div>
                            <div style="font-size: 10px; opacity: 0.7; text-align: right; margin-top: 5px;">${timeString}</div>
                        </div>
                    </div>
                `;
                
                // 添加到聊天历史
                chatHistory.appendChild(messageElement);
                
                // 滚动到底部
                chatHistory.scrollTop = chatHistory.scrollHeight;
                
                // 清空输入框
                chatInput.value = '';
                
                // 模拟回复
                setTimeout(() => {
                    // 随机选择一个回复者
                    const randomUser = otherUsers[Math.floor(Math.random() * otherUsers.length)];
                    const replyMessage = [
                        "Tôi đã xem thông tin bệnh nhân, sẽ liên hệ sớm.",
                        "Cần thêm xét nghiệm máu cho bệnh nhân này.",
                        "Bệnh nhân cần được theo dõi cẩn thận trong 24 giờ tới.",
                        "Đã sắp xếp lịch khám lại cho bệnh nhân vào ngày mai.",
                        "Tôi đồng ý với phương pháp điều trị này."
                    ];
                    const randomReply = replyMessage[Math.floor(Math.random() * replyMessage.length)];
                    
                    const replyElement = document.createElement('div');
                    replyElement.style.marginBottom = '15px';
                    
                    replyElement.innerHTML = `
                        <div style="display: flex; justify-content: flex-start; margin-bottom: 3px;">
                            <div style="font-size: 12px; color: #6c757d; font-weight: 500; margin-left: 8px;">${randomUser.name} (${randomUser.role})</div>
                        </div>
                        <div style="display: flex; justify-content: flex-start;">
                            <div style="max-width: 70%; background-color: #e9ecef; color: #333; padding: 10px; border-radius: 12px 12px 12px 0; position: relative;">
                                <div style="word-wrap: break-word;">${randomReply}</div>
                                <div style="font-size: 10px; opacity: 0.7; text-align: right; margin-top: 5px;">${timeString}</div>
                            </div>
                        </div>
                    `;
                    
                    chatHistory.appendChild(replyElement);
                    chatHistory.scrollTop = chatHistory.scrollHeight;
                }, 1000);
            }
        }
        
        // 上传附件
        function uploadAttachment() {
            document.getElementById('attachmentInput').click();
        }
        
        // 处理附件上传
        document.getElementById('attachmentInput').addEventListener('change', function(e) {
            if (e.target.files && e.target.files[0]) {
                const file = e.target.files[0];
                const chatHistory = document.getElementById('chatHistory');
                
                // 获取当前时间
                const now = new Date();
                const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                                  now.getMinutes().toString().padStart(2, '0');
                
                // 创建附件消息元素
                const attachmentElement = document.createElement('div');
                attachmentElement.style.marginBottom = '15px';
                
                attachmentElement.innerHTML = `
                    <div style="display: flex; justify-content: flex-end; margin-bottom: 3px;">
                        <div style="font-size: 12px; color: #6c757d; font-weight: 500; margin-right: 8px;">${currentUser.name} (${currentUser.role})</div>
                    </div>
                    <div style="display: flex; justify-content: flex-end;">
                        <div style="max-width: 70%; background-color: #007bff; color: white; padding: 10px; border-radius: 12px 12px 0 12px; position: relative;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <i class="fa fa-file"></i>
                                <span>${file.name}</span>
                            </div>
                            <div style="font-size: 10px; opacity: 0.7; text-align: right; margin-top: 5px;">${timeString}</div>
                        </div>
                    </div>
                `;
                
                // 添加到聊天历史
                chatHistory.appendChild(attachmentElement);
                chatHistory.scrollTop = chatHistory.scrollHeight;
                
                // 重置文件输入
                e.target.value = '';
            }
        });
        
        // 支持按Enter发送消息
        document.getElementById('chatInput').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendChatMessage();
            }
        });
        </script>
    </div>

    <script>
        // Function to open a tab
        function openTab(evt, tabName) {
            // Hide all tab content
            var tabcontent = document.getElementsByClassName("tab-content");
            for (var i = 0; i < tabcontent.length; i++) {
                tabcontent[i].classList.remove("active");
            }

            // Remove active class from all tabs
            var tablinks = document.getElementsByClassName("tab");
            for (var i = 0; i < tablinks.length; i++) {
                tablinks[i].classList.remove("active");
            }

            // Show the selected tab content and mark the button as active
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        // Function to edit medical details
        function editMedicalDetail() {
            alert("Chức năng sửa chi tiết bệnh án đang được phát triển");
        }

        function editSummaryDetail() {
            // Toggle readonly attribute for all textareas and inputs in the summary tab
            const textareas = document.querySelectorAll('#tab-tongket textarea');
            const inputs = document.querySelectorAll('#tab-tongket input');

            let isEditing = false;

            // Check if any element is already editable
            for (let i = 0; i < textareas.length; i++) {
                if (!textareas[i].hasAttribute('readonly')) {
                    isEditing = true;
                    break;
                }
            }

            if (isEditing) {
                // Switch to view mode
                textareas.forEach(ta => {
                    ta.setAttribute('readonly', 'readonly');
                    ta.style.backgroundColor = '#f9f9f9';
                });
                inputs.forEach(inp => {
                    inp.setAttribute('readonly', 'readonly');
                    inp.style.backgroundColor = '#f9f9f9';
                });
                // Show success message
                alert('Cập nhật thông tin tổng kết bệnh án thành công!');
            } else {
                // Switch to edit mode
                textareas.forEach(ta => {
                    ta.removeAttribute('readonly');
                    ta.style.backgroundColor = '#ffffff';
                });
                inputs.forEach(inp => {
                    inp.removeAttribute('readonly');
                    inp.style.backgroundColor = '#ffffff';
                });
            }
        }

        function editTreatmentLog() {
            // Toggle readonly attribute for all textareas and inputs in the treatment log tab
            const textareas = document.querySelectorAll('#tab-theodoi textarea');
            const inputs = document.querySelectorAll('#tab-theodoi input:not([type="checkbox"])');

            let isEditing = false;

            // Check if any element is already editable
            for (let i = 0; i < textareas.length; i++) {
                if (!textareas[i].hasAttribute('readonly')) {
                    isEditing = true;
                    break;
                }
            }

            if (isEditing) {
                // Switch to view mode
                textareas.forEach(ta => {
                    ta.setAttribute('readonly', 'readonly');
                    ta.style.backgroundColor = '#f9f9f9';
                });
                inputs.forEach(inp => {
                    inp.setAttribute('readonly', 'readonly');
                    inp.style.backgroundColor = '#f9f9f9';
                });
                // Show success message
                alert('Cập nhật phiếu theo dõi điều trị thành công!');
            } else {
                // Switch to edit mode
                textareas.forEach(ta => {
                    ta.removeAttribute('readonly');
                    ta.style.backgroundColor = '#ffffff';
                });
                inputs.forEach(inp => {
                    inp.removeAttribute('readonly');
                    inp.style.backgroundColor = '#ffffff';
                });
            }
        }

        // Functions for document/template tab
        function toggleDocumentEdit() {
            // Hiển thị popup chọn mẫu
            var templateModal = document.getElementById("templateModal");
            if (templateModal) {
                templateModal.style.display = "block";
            } else {
                // Tạo popup chọn mẫu nếu chưa tồn tại
                createTemplateModal();
            }
        }

        // Tạo popup chọn mẫu
        function createTemplateModal() {
            var modal = document.createElement("div");
            modal.id = "templateModal";
            modal.style.position = "fixed";
            modal.style.top = "0";
            modal.style.left = "0";
            modal.style.width = "100%";
            modal.style.height = "100%";
            modal.style.backgroundColor = "rgba(0,0,0,0.5)";
            modal.style.display = "block";
            modal.style.zIndex = "1000";
            modal.onclick = function (event) {
                if (event.target === modal) {
                    modal.style.display = "none";
                }
            };

            var modalContent = document.createElement("div");
            modalContent.style.backgroundColor = "#fff";
            modalContent.style.margin = "15% auto";
            modalContent.style.padding = "20px";
            modalContent.style.border = "1px solid #888";
            modalContent.style.width = "500px";
            modalContent.style.maxWidth = "90%";

            var modalHeader = document.createElement("div");
            modalHeader.style.display = "flex";
            modalHeader.style.justifyContent = "space-between";
            modalHeader.style.alignItems = "center";
            modalHeader.style.marginBottom = "20px";

            var title = document.createElement("h3");
            title.textContent = "Chọn mẫu tài liệu";

            var closeBtn = document.createElement("button");
            closeBtn.textContent = "×";
            closeBtn.style.fontSize = "24px";
            closeBtn.style.background = "none";
            closeBtn.style.border = "none";
            closeBtn.style.cursor = "pointer";
            closeBtn.onclick = function () {
                modal.style.display = "none";
            };

            modalHeader.appendChild(title);
            modalHeader.appendChild(closeBtn);

            var templateList = document.createElement("div");
            templateList.style.display = "grid";
            templateList.style.gridTemplateColumns = "1fr 1fr";
            templateList.style.gap = "15px";

            // Danh sách mẫu
            var templates = [
                { id: "template1", name: "Báo cáo y tế" },
                { id: "template2", name: "Hóa đơn khám bệnh" },
                { id: "template3", name: "Bệnh tóm tắt" },
                { id: "template4", name: "Phiếu tái khám" },
                { id: "template5", name: "Giấy phép nghỉ bệnh" },
                { id: "template6", name: "Khác..." }
            ];

            templates.forEach(function (template) {
                var templateItem = document.createElement("div");
                templateItem.style.padding = "15px";
                templateItem.style.border = "1px solid #ddd";
                templateItem.style.cursor = "pointer";
                templateItem.style.textAlign = "center";
                templateItem.style.borderRadius = "5px";
                templateItem.style.transition = "background-color 0.2s";
                templateItem.innerHTML = template.name;
                templateItem.onclick = function () {
                    modal.style.display = "none";
                    // Mở popup chỉnh sửa tài liệu
                    openDocumentEditModal(template);
                };
                templateItem.onmouseover = function () {
                    templateItem.style.backgroundColor = "#f5f5f5";
                };
                templateItem.onmouseout = function () {
                    templateItem.style.backgroundColor = "#fff";
                };
                templateList.appendChild(templateItem);
            });

            modalContent.appendChild(modalHeader);
            modalContent.appendChild(templateList);
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
        }

        // Mở popup chỉnh sửa tài liệu
        function openDocumentEditModal(template) {
            var editModal = document.getElementById("documentEditModal");
            if (editModal) {
                editModal.remove();
            }

            var modal = document.createElement("div");
            modal.id = "documentEditModal";
            modal.style.position = "fixed";
            modal.style.top = "0";
            modal.style.left = "0";
            modal.style.width = "100%";
            modal.style.height = "100%";
            modal.style.backgroundColor = "rgba(0,0,0,0.5)";
            modal.style.display = "block";
            modal.style.zIndex = "1000";
            modal.onclick = function (event) {
                if (event.target === modal) {
                    modal.style.display = "none";
                }
            };

            var modalContent = document.createElement("div");
            modalContent.style.backgroundColor = "#fff";
            modalContent.style.margin = "5% auto";
            modalContent.style.padding = "20px";
            modalContent.style.border = "1px solid #888";
            modalContent.style.width = "800px";
            modalContent.style.maxWidth = "95%";
            modalContent.style.maxHeight = "80vh";
            modalContent.style.overflow = "auto";

            var modalHeader = document.createElement("div");
            modalHeader.style.display = "flex";
            modalHeader.style.justifyContent = "space-between";
            modalHeader.style.alignItems = "center";
            modalHeader.style.marginBottom = "20px";

            var title = document.createElement("h3");
            title.textContent = "Chỉnh sửa tài liệu: " + template.name;

            var closeBtn = document.createElement("button");
            closeBtn.textContent = "×";
            closeBtn.style.fontSize = "24px";
            closeBtn.style.background = "none";
            closeBtn.style.border = "none";
            closeBtn.style.cursor = "pointer";
            closeBtn.onclick = function () {
                modal.style.display = "none";
            };

            modalHeader.appendChild(title);
            modalHeader.appendChild(closeBtn);

            var form = document.createElement("div");

            var nameGroup = document.createElement("div");
            nameGroup.style.marginBottom = "15px";
            var nameLabel = document.createElement("label");
            nameLabel.textContent = "Tên tài liệu:";
            nameLabel.style.display = "block";
            nameLabel.style.marginBottom = "5px";
            var nameInput = document.createElement("input");
            nameInput.type = "text";
            nameInput.id = "editDocumentName";
            nameInput.value = template.name;
            nameInput.style.width = "100%";
            nameInput.style.padding = "8px";
            nameInput.style.border = "1px solid #ccc";
            nameGroup.appendChild(nameLabel);
            nameGroup.appendChild(nameInput);

            var contentGroup = document.createElement("div");
            contentGroup.style.marginBottom = "15px";
            var contentLabel = document.createElement("label");
            contentLabel.textContent = "Nội dung tài liệu:";
            contentLabel.style.display = "block";
            contentLabel.style.marginBottom = "5px";
            var contentTextarea = document.createElement("textarea");
            contentTextarea.id = "editDocumentContent";
            contentTextarea.style.width = "100%";
            contentTextarea.style.height = "300px";
            contentTextarea.style.padding = "8px";
            contentTextarea.style.border = "1px solid #ccc";
            contentTextarea.style.resize = "vertical";
            contentTextarea.placeholder = "Nhập nội dung tài liệu tại đây...";

            // Nội dung mẫu dựa trên template
            if (template.id === "template1") {
                contentTextarea.value = "BÁO CÁO Y TẾ\n\nHọ tên bệnh nhân: [Nhập tên]\nNgày sinh: [Nhập ngày sinh]\nSố điện thoại: [Nhập SĐT]\n\nTHÔNG TIN KHÁM: [Nhập thông tin khám]\nCHẨN ĐOÁN: [Nhập chẩn đoán]\nPHƯƠNG PHÁP ĐIỀU TRỊ: [Nhập phương pháp]\n\nBác sĩ: [Nhập tên bác sĩ]\nNgày: [Nhập ngày]";
            }

            contentGroup.appendChild(contentLabel);
            contentGroup.appendChild(contentTextarea);

            var actions = document.createElement("div");
            actions.style.display = "flex";
            actions.style.justifyContent = "flex-end";
            actions.style.gap = "10px";
            actions.style.marginTop = "20px";

            var cancelBtn = document.createElement("button");
            cancelBtn.className = "btn btn-secondary";
            cancelBtn.textContent = "Hủy";
            cancelBtn.onclick = function () {
                modal.style.display = "none";
            };

            var saveBtn = document.createElement("button");
            saveBtn.className = "btn";
            saveBtn.textContent = "Lưu";
            saveBtn.onclick = function () {
                saveEditedDocument();
            };

            var savePdfBtn = document.createElement("button");
            savePdfBtn.className = "btn";
            savePdfBtn.textContent = "Lưu thành PDF";
            savePdfBtn.onclick = function () {
                exportToPDF();
            };

            actions.appendChild(cancelBtn);
            actions.appendChild(saveBtn);
            actions.appendChild(savePdfBtn);

            form.appendChild(nameGroup);
            form.appendChild(contentGroup);
            form.appendChild(actions);

            modalContent.appendChild(modalHeader);
            modalContent.appendChild(form);
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
        }

        // Lưu tài liệu đã chỉnh sửa
        function saveEditedDocument() {
            var name = document.getElementById("editDocumentName").value;
            var content = document.getElementById("editDocumentContent").value;

            if (!name || !content) {
                alert("Vui lòng nhập tên và nội dung tài liệu.");
                return;
            }

            // Lưu vào danh sách tài liệu
            alert("Tài liệu \"" + name + "\" đã được lưu thành công!");

            // Đóng popup
            var modal = document.getElementById("documentEditModal");
            if (modal) {
                modal.style.display = "none";
            }

            // Cập nhật danh sách tài liệu (giả lập)
            updateDocumentList(name);
        }

        // Xuất thành PDF
        function exportToPDF() {
            var name = document.getElementById("editDocumentName").value;
            var content = document.getElementById("editDocumentContent").value;

            if (!name || !content) {
                alert("Vui lòng nhập tên và nội dung tài liệu trước khi xuất PDF.");
                return;
            }

            // Giả lập quá trình xuất PDF
            alert("Đang xuất tài liệu \"" + name + "\" thành PDF...\n\nTrong thực tế, đây sẽ gọi một thư viện PDF generation như jsPDF để tạo tệp PDF từ nội dung.");

            // Ở đây, bạn có thể sử dụng một thư viện như jsPDF để thực hiện việc tạo PDF
            // Ví dụ: 
            // var doc = new jsPDF();
            // doc.text(content, 10, 10);
            // doc.save(name + '.pdf');
        }

        // Cập nhật danh sách tài liệu
        function updateDocumentList(docName) {
            var tableBody = document.querySelector("#tab-tailieu tbody");
            if (!tableBody) return;

            // Tạo một bản ghi mới
            var newRow = document.createElement("tr");

            // STT - tìm số tiếp theo
            var rows = tableBody.querySelectorAll("tr");
            var stt = rows.length + 1;

            // Ngày hiện tại
            var today = new Date();
            var dateStr = today.getFullYear() + "-" +
                String(today.getMonth() + 1).padStart(2, '0') + "-" +
                String(today.getDate()).padStart(2, '0');

            // Mã tài liệu
            var code = "TL" + String(Math.floor(Math.random() * 1000)).padStart(3, '0');

            newRow.innerHTML = `
                        <td style="border: 1px solid #000; padding: 8px; text-align: center;">${stt}</td>
                        <td style="border: 1px solid #000; padding: 8px; text-align: center;">${dateStr}</td>
                        <td style="border: 1px solid #000; padding: 8px; text-align: center;">${code}</td>
                        <td style="border: 1px solid #000; padding: 8px;">${docName}</td>
                        <td style="border: 1px solid #000; padding: 8px; text-align: center;">
                            <span style="color: red;">Chưa ký</span>
                        </td>
                        <td style="border: 1px solid #000; padding: 8px; text-align: center;">
                            <button class="btn btn-small">Xem</button>
                            <button class="btn btn-small btn-danger">Xóa</button>
                        </td>
                    `;

            // Thêm vào đầu bảng để hiển thị trước
            tableBody.insertBefore(newRow, tableBody.firstChild);

            // Cập nhật lại STT cho các dòng còn lại
            for (let i = 1; i < rows.length + 1; i++) {
                rows[i - 1].querySelector("td:first-child").textContent = i + 1;
            }
        }

        function cancelDocumentUpload() {
            var form = document.getElementById("documentUploadForm");
            if (form) {
                form.style.display = "none";

                var nameInput = document.getElementById("documentName");
                var fileInput = document.getElementById("documentFile");

                if (nameInput) nameInput.value = "";
                if (fileInput) fileInput.value = "";
            }
        }

        function saveDocument() {
            var nameInput = document.getElementById("documentName");
            var fileInput = document.getElementById("documentFile");

            if (!nameInput || !fileInput) {
                alert("Form tải lên tài liệu chưa sẵn sàng.");
                return;
            }

            var name = nameInput.value;
            var file = fileInput.files[0];

            if (!name || !file) {
                alert("Vui lòng nhập tên tài liệu và chọn file.");
                return;
            }

            alert("Tài liệu đã được lưu thành công!");
            cancelDocumentUpload();
        }
    </script>

    <!-- Modal tạo hồ sơ mới -->
    <div id="createRecordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Tạo hồ sơ bệnh án mới</div>
                <div class="close-modal" onclick="closeCreateRecordModal()">&times;</div>
            </div>

            <div class="grid-2">
                <div class="field">
                    <label>Ngày khám</label>
                    <input type="date" value="" id="newRecordDate">
                </div>
                <div class="field">
                    <label>Thời gian khám</label>
                    <input type="time" value="" id="newRecordTime">
                </div>
                <div class="field">
                    <label>Khoa khám</label>
                    <select id="newRecordDepartment">
                        <option value="noi">Khoa Nội</option>
                        <option value="ngoai">Khoa Ngoại</option>
                        <option value="san">Khoa Sản</option>
                        <option value="nha">Khoa Nha Khoa</option>
                    </select>
                </div>
                <div class="field">
                    <label>Bác sĩ khám</label>
                    <select id="newRecordDoctor">
                        <option value="nguyenvanhung">Nguyễn Văn Hùng</option>
                        <option value="nguyenthihoa">Nguyễn Thị Hoa</option>
                        <option value="tranthiminh">Trần Thị Minh</option>
                    </select>
                </div>
                <div class="field">
                    <label>Loại khám</label>
                    <select id="newRecordType">
                        <option value="thuong">Khám thường</option>
                        <option value="tai_nha">Khám tại nhà</option>
                        <option value="tai_vien">Nhập viện</option>
                        <option value="tai_ngoai">Ngoại trú</option>
                    </select>
                </div>
            </div>

            <div class="form-actions">
                <button class="btn" onclick="closeCreateRecordModal()">Hủy</button>
                <button class="btn primary" onclick="createNewRecord()">Tạo hồ sơ</button>
            </div>
        </div>
    </div>

    <!-- Modal xem file -->
    <div id="viewFileModal" class="modal">
        <div class="modal-content" style="max-width: 800px; max-height: 90vh;">
            <div class="modal-header">
                <div class="modal-title" id="viewFileName">Xem file</div>
                <div class="close-modal" onclick="closeViewFileModal()">&times;</div>
            </div>
            <div id="fileViewer"
                style="width: 100%; height: 500px; background: #f5f5f5; display: flex; justify-content: center; align-items: center;">
                <!-- Nội dung file sẽ được hiển thị ở đây -->
                <div style="text-align: center;">
                    <div style="font-size: 48px; margin-bottom: 16px;">📄</div>
                    <div id="fileViewerText" style="font-size: 16px;">File preview will appear here</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal chọn biểu mẫu -->
    <div id="formListModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Chọn biểu mẫu</div>
                <div class="close-modal" onclick="closeFormListModal()">&times;</div>
            </div>
            <div class="modal-body">
                <div class="form-list">
                    <div class="form-item" onclick="selectForm('phieu_xuat_vien')">
                        <span class="form-icon">🏥</span>
                        <span class="form-name">Phiếu xuất viện</span>
                    </div>
                    <div class="form-item" onclick="selectForm('phieu_nghi_bhxh')">
                        <span class="form-icon">📋</span>
                        <span class="form-name">Phiếu nghỉ bảo hiểm xã hội</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Phiếu xuất viện -->
    <div id="phieuXuatVienModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Phiếu xuất viện</div>
                <div class="close-modal" onclick="closeFormModal('phieuXuatVienModal')">&times;</div>
            </div>
            <div class="modal-body">
                <div class="grid-2">
                    <div class="field">
                        <label>Mã bệnh nhân</label>
                        <input type="text" value="BN001234" disabled>
                    </div>
                    <div class="field">
                        <label>Họ và tên</label>
                        <input type="text" value="Nguyễn Văn A" disabled>
                    </div>
                    <div class="field">
                        <label>Ngày nhập viện</label>
                        <input type="date" id="ngayNhapVien">
                    </div>
                    <div class="field">
                        <label>Ngày xuất viện</label>
                        <input type="date" id="ngayXuatVien">
                    </div>
                    <div class="field">
                        <label>Chẩn đoán chính</label>
                        <input type="text" id="chanDoanChinh">
                    </div>
                    <div class="field">
                        <label>Chẩn đoán phụ</label>
                        <input type="text" id="chanDoanPhu">
                    </div>
                    <div class="field grid-span-2">
                        <label>Nhận xét điều trị</label>
                        <textarea id="nhanXetDieuTri" rows="4"></textarea>
                    </div>
                    <div class="field grid-span-2">
                        <label>Lời dặn</label>
                        <textarea id="loiDan" rows="3"></textarea>
                    </div>
                </div>
            </div>
            <div class="form-actions">
                <button class="btn" onclick="closeFormModal('phieuXuatVienModal')">Hủy</button>
                <button class="btn primary" onclick="savePhieuXuatVien()">Lưu và in</button>
            </div>
        </div>
    </div>

    <!-- Modal Phiếu nghỉ bảo hiểm xã hội -->
    <div id="phieuNghiBHXHModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Phiếu nghỉ bảo hiểm xã hội</div>
                <div class="close-modal" onclick="closeFormModal('phieuNghiBHXHModal')">&times;</div>
            </div>
            <div class="modal-body">
                <div class="grid-2">
                    <div class="field">
                        <label>Mã bệnh nhân</label>
                        <input type="text" value="BN001234" disabled>
                    </div>
                    <div class="field">
                        <label>Họ và tên</label>
                        <input type="text" value="Nguyễn Văn A" disabled>
                    </div>
                    <div class="field">
                        <label>Từ ngày</label>
                        <input type="date" id="tuNgayNghi">
                    </div>
                    <div class="field">
                        <label>Đến ngày</label>
                        <input type="date" id="denNgayNghi">
                    </div>
                    <div class="field">
                        <label>Lý do nghỉ</label>
                        <select id="lyDoNghi">
                            <option value="suc_khoe">Sức khỏe</option>
                            <option value="ngoai_le">Ngoại lệ</option>
                        </select>
                    </div>
                    <div class="field grid-span-2">
                        <label>Thông tin chẩn đoán</label>
                        <textarea id="thongTinChanDoan" rows="3"></textarea>
                    </div>
                </div>
            </div>
            <div class="form-actions">
                <button class="btn" onclick="closeFormModal('phieuNghiBHXHModal')">Hủy</button>
                <button class="btn primary" onclick="savePhieuNghiBHXH()">Lưu và in</button>
            </div>
        </div>
    </div>

    <style>
        .form-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 12px;
        }

        .form-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            border: 1px solid var(--line);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .form-item:hover {
            background: #f0f9ff;
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .form-icon {
            font-size: 24px;
        }

        .form-name {
            font-weight: 500;
        }

        .grid-span-2 {
            grid-column: span 2;
        }
    </style>

    <style>
        /* Tab Navigation Styles */
        .tab-navigation {
            display: flex;
            margin-bottom: 16px;
            border-bottom: 1px solid #ddd;
        }

        .tab {
            background-color: #f1f1f1;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 10px 15px;
            font-size: 14px;
            margin-right: 5px;
            border-radius: 4px 4px 0 0;
            transition: 0.3s;
        }

        .tab:hover {
            background-color: #ddd;
        }

        .tab.active {
            background-color: #fff;
            border-bottom: 2px solid #4CAF50;
            font-weight: bold;
        }

        .tab-content {
            display: none;
            padding: 0;
        }

        .tab-content.active {
            display: block;
        }
    </style>

    <script>
        // Khởi tạo ngày hôm nay cho trường ngày khám mới
        document.addEventListener('DOMContentLoaded', function () {
            const today = new Date();
            const dateString = today.toISOString().split('T')[0];
            const timeString = today.getHours().toString().padStart(2, '0') + ':' + today.getMinutes().toString().padStart(2, '0');

            document.getElementById('newRecordDate').value = dateString;
            document.getElementById('newRecordTime').value = timeString;

            // Khởi tạo canvas ký tên
            initSignaturePad();

            // Thêm sự kiện chọn bệnh nhân
            document.querySelectorAll('.patient-item').forEach(item => {
                item.addEventListener('click', function () {
                    selectPatient(this);
                });
            });
        });

        // Chọn bệnh nhân
        function selectPatient(element) {
            // Loại bỏ lớp active từ tất cả bệnh nhân
            document.querySelectorAll('.patient-item').forEach(patient => {
                patient.classList.remove('active');
            });

            // Thêm lớp active cho bệnh nhân được chọn
            element.classList.add('active');

            // Cập nhật tên bệnh nhân trên tiêu đề
            const patientName = element.querySelector('.patient-info h3').textContent;
            document.querySelector('.header h2').textContent = `Hồ sơ bệnh án - ${patientName}`;

            // Trong thực tế, đây sẽ load dữ liệu bệnh nhân từ server
            console.log('Loading medical record for:', patientName);
        }

        // Sửa thông tin bệnh nhân
        function editPatientInfo() {
            alert('Mở form chỉnh sửa thông tin bệnh nhân');
            // Trong thực tế, đây sẽ mở một form chỉnh sửa thông tin bệnh nhân
        }

        // Lọc hồ sơ bệnh án
        function filterRecords() {
            console.log('Filtering medical records');
            // Lọc hồ sơ bệnh án theo khoảng thời gian được chọn
        }

        // Xem chi tiết hồ sơ bệnh án
        function viewMedicalRecord(recordId) {
            console.log('Viewing medical record:', recordId);
            // Trong thực tế, đây sẽ load hồ sơ bệnh án chi tiết theo ID
            alert(`Đang tải hồ sơ bệnh án với ID: ${recordId}`);
        }

        // Bỏ qua thay đổi
        function discardChanges() {
            if (confirm('Bạn có chắc chắn muốn bỏ qua tất cả thay đổi?')) {
                console.log('Discarding changes');
                // Trong thực tế, đây sẽ tải lại hồ sơ từ server
            }
        }

        // Lưu hồ sơ bệnh án
        function saveMedicalRecord() {
            console.log('Saving medical record');
            alert('✅ Hồ sơ bệnh án đã được lưu thành công!');
        }

        // Ký số và lưu hồ sơ
        function signMedicalRecord() {
            if (confirm('Bạn đồng ý ký số hồ sơ bệnh án này?')) {
                console.log('Electronically signing medical record');
                // Gọi hàm lưu ký và sau đó lưu hồ sơ
                saveSignature();
                saveMedicalRecord();
            }
        }

        // Khởi tạo bảng ký tên
        function initSignaturePad() {
            const canvas = document.getElementById('signaturePad');
            const ctx = canvas.getContext('2d');

            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;

            // Thiết lập kiểu vẽ
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.strokeStyle = '#000';

            // Hàm bắt đầu vẽ
            function startDrawing(e) {
                isDrawing = true;
                [lastX, lastY] = [e.offsetX, e.offsetY];
            }

            // Hàm vẽ
            function draw(e) {
                if (!isDrawing) return;
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(e.offsetX, e.offsetY);
                ctx.stroke();
                [lastX, lastY] = [e.offsetX, e.offsetY];
            }

            // Hàm kết thúc vẽ
            function stopDrawing() {
                isDrawing = false;
            }

            // Thêm sự kiện
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);

            // Thêm hỗ trợ触摸屏
            canvas.addEventListener('touchstart', function (e) {
                const touch = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                lastX = touch.clientX - rect.left;
                lastY = touch.clientY - rect.top;
                startDrawing(touch);
                e.preventDefault();
            });

            canvas.addEventListener('touchmove', function (e) {
                if (!isDrawing) return;
                const touch = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                const x = touch.clientX - rect.left;
                const y = touch.clientY - rect.top;

                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(x, y);
                ctx.stroke();

                lastX = x;
                lastY = y;
                e.preventDefault();
            });

            canvas.addEventListener('touchend', function (e) {
                stopDrawing();
                e.preventDefault();
            });
        }

        // Xóa ký tên
        function clearSignature() {
            const canvas = document.getElementById('signaturePad');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Lưu ký tên
        function saveSignature() {
            const canvas = document.getElementById('signaturePad');
            const signatureData = canvas.toDataURL('image/png');
            console.log('Saving signature:', signatureData);
            alert('✅ Ký tên điện tử đã được lưu!');
        }

        // Hiển thị modal tạo hồ sơ mới
        function showCreateRecordModal() {
            document.getElementById('createRecordModal').style.display = 'flex';
        }

        // Đóng modal tạo hồ sơ mới
        function closeCreateRecordModal() {
            document.getElementById('createRecordModal').style.display = 'none';
        }

        // Tạo hồ sơ mới
        function createNewRecord() {
            const date = document.getElementById('newRecordDate').value;
            const time = document.getElementById('newRecordTime').value;
            const department = document.getElementById('newRecordDepartment').value;
            const doctor = document.getElementById('newRecordDoctor').value;
            const type = document.getElementById('newRecordType').value;

            console.log('Creating new medical record:', { date, time, department, doctor, type });
            alert('✅ Hồ sơ bệnh án mới đã được tạo!');
            closeCreateRecordModal();
        }

        // Xem file
        function viewFile(filename) {
            const modal = document.getElementById('viewFileModal');
            const fileNameElement = document.getElementById('viewFileName');
            const fileViewerText = document.getElementById('fileViewerText');

            fileNameElement.textContent = `Xem: ${filename}`;
            fileViewerText.textContent = `Đang tải file: ${filename}...`;
            modal.style.display = 'flex';

            console.log('Viewing file:', filename);
            // Trong thực tế, đây sẽ tải và hiển thị file
        }

        // Đóng modal xem file
        function closeViewFileModal() {
            document.getElementById('viewFileModal').style.display = 'none';
        }

        // Tải file xuống
        function downloadFile(filename) {
            console.log('Downloading file:', filename);
            alert(`Đang tải file: ${filename}`);
        }

        // Xóa file
        function deleteFile(filename) {
            if (confirm(`Bạn có chắc chắn muốn xóa file: ${filename}?`)) {
                console.log('Deleting file:', filename);
                alert(`✅ File ${filename} đã được xóa!`);
            }
        }

        // Hiển thị danh sách biểu mẫu
        function generateReport() {
            // Đặt ngày hôm nay cho các trường ngày
            const today = new Date();
            const dateString = today.toISOString().split('T')[0];

            // Cập nhật ngày cho các modal
            const dateInputs = document.querySelectorAll('#phieuXuatVienModal input[type="date"], #phieuNghiBHXHModal input[type="date"]');
            dateInputs.forEach(input => {
                input.value = dateString;
            });

            // Hiển thị modal chọn biểu mẫu
            document.getElementById('formListModal').style.display = 'flex';
        }

        // Đóng modal danh sách biểu mẫu
        function closeFormListModal() {
            document.getElementById('formListModal').style.display = 'none';
        }

        // Chọn một biểu mẫu
        function selectForm(formType) {
            // Đóng modal danh sách
            closeFormListModal();

            // Hiển thị modal tương ứng
            switch (formType) {
                case 'phieu_xuat_vien':
                    document.getElementById('phieuXuatVienModal').style.display = 'flex';
                    break;
                case 'phieu_nghi_bhxh':
                    document.getElementById('phieuNghiBHXHModal').style.display = 'flex';
                    break;
                case 'phieu_kham_chuyen_khoa':
                    alert('Mở biểu mẫu: Phiếu khám chuyên khoa');
                    break;
                case 'phieu_don_thuoc':
                    alert('Mở biểu mẫu: Đơn thuốc');
                    break;
                case 'phieu_yeu_cau_xn':
                    alert('Mở biểu mẫu: Yêu cầu xét nghiệm');
                    break;
                case 'phieu_yeu_cau_sieu_am':
                    alert('Mở biểu mẫu: Yêu cầu siêu âm');
                    break;
                default:
                    alert('Biểu mẫu không được hỗ trợ');
            }
        }

        // Đóng modal biểu mẫu
        function closeFormModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Lưu phiếu xuất viện
        function savePhieuXuatVien() {
            const ngayNhapVien = document.getElementById('ngayNhapVien').value;
            const ngayXuatVien = document.getElementById('ngayXuatVien').value;
            const chanDoanChinh = document.getElementById('chanDoanChinh').value;

            if (!chanDoanChinh) {
                alert('Vui lòng nhập chẩn đoán chính');
                return;
            }

            console.log('Lưu phiếu xuất viện:', { ngayNhapVien, ngayXuatVien, chanDoanChinh });
            alert('✅ Phiếu xuất viện đã được lưu và sẵn sàng in!');
            closeFormModal('phieuXuatVienModal');
        }

        // Lưu phiếu nghỉ bảo hiểm xã hội
        function savePhieuNghiBHXH() {
            const tuNgayNghi = document.getElementById('tuNgayNghi').value;
            const denNgayNghi = document.getElementById('denNgayNghi').value;
            const thongTinChanDoan = document.getElementById('thongTinChanDoan').value;

            if (!thongTinChanDoan) {
                alert('Vui lòng nhập thông tin chẩn đoán');
                return;
            }

            console.log('Lưu phiếu nghỉ BHXH:', { tuNgayNghi, denNgayNghi, thongTinChanDoan });
            alert('✅ Phiếu nghỉ bảo hiểm xã hội đã được lưu và sẵn sàng in!');
            closeFormModal('phieuNghiBHXHModal');
        }

        // Xóa hồ sơ bệnh án
        function deleteMedicalRecord() {
            if (confirm('Cảnh báo: Xóa hồ sơ bệnh án sẽ không thể khôi phục! Bạn có chắc chắn muốn tiếp tục?')) {
                console.log('Deleting medical record');
                alert('✅ Hồ sơ bệnh án đã được xóa!');
            }
        }


        // Xử lý upload file
        document.getElementById('fileInput').addEventListener('change', function (e) {
            const files = e.target.files;
            if (files.length > 0) {
                console.log('Uploading files:', files);
                alert(`✅ Đã tải lên ${files.length} file!`);
            }
        });
    </script>
</body>

</html>